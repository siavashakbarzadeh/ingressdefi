(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{"p4+3":function(t,e,i){"use strict";i.r(e),i.d(e,"TfaSettingsModule",function(){return Q});var a=i("ofXK"),s=i("tyNb"),r=i("3Pt+"),n=i("fXoL"),c=i("p/XV"),o=i("uDgL"),d=i("Tesu"),b=i("Wp6s"),l=i("bTqV"),u=i("NFeN"),f=i("kmnG"),h=i("qFsG"),p=i("Xa2L");const g=["editForm"];function m(t,e){1&t&&(n.Rb(0,"mat-icon"),n.Cc(1," fact_check "),n.Qb())}function v(t,e){1&t&&(n.Pb(0),n.Cc(1," Update TFA "),n.Ob())}function O(t,e){1&t&&(n.Pb(0),n.Cc(1," Please Wait "),n.Rb(2,"span"),n.Cc(3," ... "),n.Qb(),n.Ob())}function A(t,e){if(1&t){const t=n.Sb();n.Rb(0,"div",6),n.Rb(1,"button",7),n.Yb("click",function(){return n.tc(t),n.cc(2).formSubmit()}),n.Bc(2,m,2,0,"mat-icon",1),n.Bc(3,v,2,0,"ng-container",1),n.Bc(4,O,4,0,"ng-container",1),n.Qb(),n.Qb()}if(2&t){const t=n.cc(2);n.Ab(1),n.ic("disabled",t.isDataPassing),n.Ab(1),n.ic("ngIf",!t.isDataPassing),n.Ab(1),n.ic("ngIf",!t.isDataPassing),n.Ab(1),n.ic("ngIf",t.isDataPassing)}}function w(t,e){if(1&t&&(n.Rb(0,"mat-error"),n.Cc(1),n.Qb()),2&t){n.cc();const t=n.pc(14),e=n.cc(2);n.Ab(1),n.Ec(" ",e.general.checkError(t,"TFA Code","number")," ")}}function j(t,e){if(1&t){const t=n.Sb();n.Pb(0),n.Rb(1,"form",null,8),n.Rb(3,"div",9),n.Rb(4,"div",10),n.Rb(5,"div",11),n.Rb(6,"label"),n.Cc(7),n.Qb(),n.Mb(8,"img",12),n.Qb(),n.Rb(9,"div"),n.Rb(10,"mat-form-field",13),n.Rb(11,"mat-label"),n.Cc(12,"TFA Code"),n.Qb(),n.Rb(13,"input",14,15),n.Yb("ngModelChange",function(e){return n.tc(t),n.cc(2).editObj.tfacode=e})("keypress",function(e){n.tc(t);const i=n.cc(2);return i.general.removingSpaceFirst(e,i.editObj.tfacode)}),n.Qb(),n.Bc(15,w,2,1,"mat-error",1),n.Qb(),n.Qb(),n.Qb(),n.Rb(16,"div",16),n.Rb(17,"p",17),n.Cc(18),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Ob()}if(2&t){const t=n.pc(14),e=n.cc(2);n.Ab(7),n.Ec(" Secret Code : ",e.editObj.secret,""),n.Ab(1),n.ic("src",e.editObj.tfaurl,n.uc),n.Ab(5),n.ic("pattern",e.general.numberPattern)("ngModel",e.editObj.tfacode),n.Ab(2),n.ic("ngIf",t.errors),n.Ab(3),n.Ec(" TFA Status : ",e.editObj.tfastatus," ")}}function P(t,e){1&t&&(n.Pb(0),n.Rb(1,"p",18),n.Cc(2," You are TFA is Enabled "),n.Qb(),n.Ob())}function S(t,e){if(1&t&&(n.Rb(0,"mat-card",2),n.Rb(1,"div",3),n.Rb(2,"span"),n.Cc(3," Password Settings "),n.Qb(),n.Mb(4,"div",4),n.Bc(5,A,5,4,"div",5),n.Qb(),n.Bc(6,j,19,6,"ng-container",1),n.Bc(7,P,3,0,"ng-container",1),n.Qb()),2&t){const t=n.cc();n.Ab(5),n.ic("ngIf","Deactive"==t.editObj.tfastatus),n.Ab(1),n.ic("ngIf","Deactive"==t.editObj.tfastatus),n.Ab(1),n.ic("ngIf","Deactive"!=t.editObj.tfastatus)}}function R(t,e){1&t&&(n.Pb(0),n.Rb(1,"div",19),n.Mb(2,"mat-spinner",20),n.Qb(),n.Ob()),2&t&&(n.Ab(2),n.ic("diameter",20))}let C=(()=>{class t{constructor(t,e,i){this.dataService=t,this.general=e,this.settingsService=i,this.postRequest="",this.tfaLoader=!1,this.isPasswordObj=!1,this.modelProfile={},this.isGetSingleDataLoading=!0,this.isDataPassing=!1,this.TfaStatus=!1}ngOnInit(){this.geteditObj()}ngOnDestroy(){}geteditObj(){this.dataService.getRequest("admin/adminDetails").subscribe(t=>{this.editObj=t.data,console.log("editObj   -----\x3e",this.editObj.tfastatus),this.TfaStatus="Deactive"!=this.editObj.tfastatus,this.isGetSingleDataLoading=!1})}formSubmit(){this.updatePasswordObj()}updatePasswordObj(){this.editForm.submitted=!0,console.log(this.editObj,"+__________ this.editObj"),this.editForm.valid&&(this.isDataPassing=!0,this.dataService.postRequest("admin/tfaupdate",this.editObj).subscribe(t=>{this.editObj.tfacode="",this.dataService.openAlert(t.status,t.msg),this.isDataPassing=!1,t.status&&(this.editForm.reset(),this.geteditObj())}))}tfaStatus(){if(null==this.editObj.tfacode)return this.dataService.openAlert(!1,"Invalid Code");this.tfaLoader=!0,this.dataService.postRequest("admin/tfaupdate",{tfacode:this.editObj.tfacode}).subscribe(t=>{if(1==t.status){var e=t.result;this.editObj.tfastatus=e.tfastatus,this.editObj.secret=e.secret,this.editObj.tfaurl=e.tfaurl,this.editObj.tfacode="",this.dataService.openAlert(!0,1==e.tfa_status?"TFA enabled successfully":"TFA disabled successfully")}else this.dataService.openAlert(!0,t.msg);this.tfaLoader=!1})}}return t.\u0275fac=function(e){return new(e||t)(n.Lb(c.a),n.Lb(o.a),n.Lb(d.a))},t.\u0275cmp=n.Fb({type:t,selectors:[["app-tfa-settings"]],viewQuery:function(t,e){if(1&t&&n.Gc(g,!0,r.j),2&t){let t;n.oc(t=n.Zb())&&(e.editForm=t.first)}},decls:2,vars:2,consts:[["class","table-container",4,"ngIf"],[4,"ngIf"],[1,"table-container"],[1,"d-flex","align-items-center","mb-4","page-header"],[1,"spacer"],["class","group-button",4,"ngIf"],[1,"group-button"],["type","submit","mat-button","","color","accent",3,"disabled","click"],["editForm","ngForm"],[1,"row"],[1,"col-md-4"],[1,"d-flex","flex-column"],[1,"m-auto",3,"src"],["appearance","outline"],["matInput","","placeholder","TFA Code","name","tfacode","autocomplete","off","required","",3,"pattern","ngModel","ngModelChange","keypress"],["tfacode","ngModel"],[1,"col-md-8"],[1,"text-right"],[1,"text-center","padding","text-success"],[1,"d-flex","justify-content-center","padding"],["color","primary",3,"diameter"]],template:function(t,e){1&t&&(n.Bc(0,S,8,3,"mat-card",0),n.Bc(1,R,3,1,"ng-container",1)),2&t&&(n.ic("ngIf",!e.isGetSingleDataLoading),n.Ab(1),n.ic("ngIf",e.isGetSingleDataLoading))},directives:[a.l,b.a,l.b,u.a,r.r,r.i,r.j,f.c,f.f,h.a,r.a,r.o,r.n,r.h,r.k,f.b,p.b],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%!important;font-size:13px}"]}),t})();var D=i("aSaG");const y=[{path:"",component:C}];let Q=(()=>{class t{}return t.\u0275mod=n.Jb({type:t}),t.\u0275inj=n.Ib({factory:function(e){return new(e||t)},imports:[[a.c,D.a,s.f.forChild(y)]]}),t})()},uDgL:function(t,e,i){"use strict";i.d(e,"a",function(){return r});var a=i("fXoL"),s=i("dNgK");let r=(()=>{class t{constructor(t){this.snackBar=t,this.specialCharacterPattern="^(?=.*[a-zA-Z])[a-zA-Z0-9]+$",this.passwordPattern="(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[`~#^$@$!%*?&])[A-Za-zd$@$!%*?&].{7,}",this.numberPattern="^[0-9]*$",this.alphaNumericPattern="^(?=.*[a-zA-Z])[a-zA-Z0-9]+$",this.floatNumber="[+-]?([0-9]*[.])?[0-9]+",this.stringWithSpace="^[a-zA-Z_ ]*$",this.passwordLength=8,this.ipPattern="^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?).(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?).(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?).(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$"}checkError(t,e,i){if(t.errors.hasOwnProperty("required"))return e+" is required";if(t.errors.hasOwnProperty("email"))return"Please enter a valid email address";if(t.errors.pattern){if("specialChar"==i)return"Special characters not allowed";if("password"==i)return"Password must contain atleast one uppercase, One lowercase, One numeric digit, One special character, 8 characters";if("cPassword"==i)return"Password Mismatch";if("number"==i)return e+" should be numerical";if("alphaNumeric"==i)return e+" contain only Alphanumeric characters and atleast one character";if("ip"==i)return"Enter Valid Ip Address"}else{if(t.errors.minlength)return"Min length is "+t.errors.minlength.requiredLength;if(t.errors.whitespace)return"White Space ";if(t.errors.matDatepickerMin)return"Date is expired "}}openNewWindow(t,e){let i=String(t),a=window.open("","_blank");console.log(e,"_type"),e&&"video"==e.toLowerCase()?a.document.write(`<img> <video src="${i}"  height="200" controls></video>`):a.document.write(`<img src="${i}">`)}isFile(t,e,i){if(i&&"video"==i.toLowerCase()){if(e.target.files&&e.target.files[0])for(var a=0;a<t.length;a++){let e=(s=t[a]).size/1024/1024;return"video/mp4"!=s.type?(this.openAlert(!1,"Invalid video format"),!1):!(e>=2&&(this.openAlert(!1,"Upload video should be less than or equal to 2MB"),1))}}else if(e.target.files&&e.target.files[0])for(a=0;a<t.length;a++){var s;let e=(s=t[a]).type,i=s.size/1024/1024;return"image/png"!=e&&"image/jpg"!=e&&"image/jpeg"!=e?(this.openAlert(!1,"Invalid image format"),!1):!(i>=2&&(this.openAlert(!1,"Upload image should be less than or equal to 2MB"),1))}}openAlert(t,e){let i;i="true"===t||!0===t?"bg-success":"bg-error",this.snackBar.open(e,"X",{duration:5e3,horizontalPosition:"right",verticalPosition:"top",panelClass:i})}loaded(t){t.classList.remove("is-loading-secondary")}removingSpaceFirst(t,e,i){32!==t.which||e.length||t.preventDefault()}removingSpace(t){32===t.which&&t.preventDefault()}}return t.\u0275fac=function(e){return new(e||t)(a.Vb(s.a))},t.\u0275prov=a.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);