(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{tY9H:function(t,e,i){"use strict";i.r(e),i.d(e,"BlogsEditModule",function(){return q});var n=i("d1T+"),a=i("AytR"),o=i("fXoL"),c=i("p/XV"),s=i("uDgL"),r=i("tyNb"),l=i("ofXK"),b=i("Wp6s"),d=i("3Pt+"),g=i("fB2i"),p=i("qFsG"),u=i("kmnG"),h=i("nXeD");function m(t,e){1&t&&(o.Pb(0),o.Cc(1,"New Blog "),o.Ob())}function f(t,e){if(1&t&&(o.Pb(0),o.Cc(1),o.Ob()),2&t){const t=o.cc();o.Ab(1),o.Ec(" Title - ",t.editObj.title," ")}}function v(t,e){if(1&t&&(o.Rb(0,"mat-error"),o.Cc(1),o.Qb()),2&t){o.cc();const t=o.pc(5),e=o.cc(2);o.Ab(1),o.Ec("",e.general.checkError(t,"Title")," ")}}function R(t,e){if(1&t){const t=o.Sb();o.Rb(0,"div",12),o.Rb(1,"label",13),o.Cc(2,"Title"),o.Qb(),o.Rb(3,"div",17),o.Rb(4,"input",25,26),o.Yb("ngModelChange",function(e){return o.tc(t),o.cc(2).editObj.title=e})("keypress",function(e){o.tc(t);const i=o.cc(2);return i.general.removingSpaceFirst(e,i.editObj.title)}),o.Qb(),o.Bc(6,v,2,1,"mat-error",24),o.Qb(),o.Qb()}if(2&t){const t=o.pc(5),e=o.cc(2);o.Ab(4),o.ic("ngModel",e.editObj.title),o.Ab(2),o.ic("ngIf",t.errors)}}function j(t,e){1&t&&(o.Rb(0,"small",27),o.Cc(1,"Page Content is Required"),o.Qb())}function O(t,e){1&t&&(o.Rb(0,"small",27),o.Cc(1,"Image is Required"),o.Qb())}function w(t,e){if(1&t&&(o.Rb(0,"div",12),o.Mb(1,"label",28),o.Rb(2,"div",29),o.Mb(3,"img",30),o.Qb(),o.Qb()),2&t){const t=o.cc(2);o.Ab(3),o.jc("src",t.editObj.image,o.uc)}}function C(t,e){if(1&t){const t=o.Sb();o.Rb(0,"div"),o.Rb(1,"button",31),o.Mb(2,"i",32),o.Cc(3," Submit"),o.Qb(),o.Rb(4,"button",33),o.Yb("click",function(){return o.tc(t),o.cc(2).cancelToEdit()}),o.Mb(5,"i",34),o.Cc(6," Cancel"),o.Qb(),o.Qb()}if(2&t){o.cc();const t=o.pc(3);o.Ab(1),o.ic("disabled",!t.form.valid)}}function Q(t,e){1&t&&(o.Rb(0,"div"),o.Rb(1,"button",35),o.Mb(2,"span",36),o.Cc(3," Loading..."),o.Qb(),o.Qb())}const y=function(t){return{isError:t}},A=function(){return["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"]},S=function(t){return{height:500,menubar:!0,plugins:t,toolbar:"undo redo | formatselect | bold italic forecolor backcolor | \n              alignleft aligncenter alignright alignjustify | \n              bullist numlist outdent indent | removeformat | help"}},M=function(t){return{"is-invalid":t}};function k(t,e){if(1&t){const t=o.Sb();o.Rb(0,"mat-card",7),o.Pb(1),o.Rb(2,"form",8,9),o.Yb("ngSubmit",function(){o.tc(t);const e=o.pc(3),i=o.cc();return e.form.valid&&i.onSubmit()}),o.Rb(4,"div",10),o.Bc(5,R,7,2,"div",11),o.Rb(6,"div",12),o.Rb(7,"label",13),o.Cc(8,"Content"),o.Qb(),o.Rb(9,"div",14),o.Rb(10,"editor",15),o.Yb("ngModelChange",function(e){return o.tc(t),o.cc().editObj.pagecontent=e}),o.Qb(),o.Bc(11,j,2,0,"small",16),o.Qb(),o.Qb(),o.Rb(12,"div",12),o.Rb(13,"label",13),o.Cc(14,"Image"),o.Qb(),o.Rb(15,"div",17),o.Rb(16,"input",18,19),o.Yb("change",function(e){return o.tc(t),o.cc().onFileChanged(e)})("ngModelChange",function(e){return o.tc(t),o.cc().editObj.blog_img=e}),o.Qb(),o.Bc(18,O,2,0,"small",16),o.Qb(),o.Qb(),o.Bc(19,w,4,1,"div",11),o.Rb(20,"div",12),o.Rb(21,"label",13),o.Cc(22,"Status"),o.Qb(),o.Rb(23,"div",17),o.Rb(24,"select",20,21),o.Yb("ngModelChange",function(e){return o.tc(t),o.cc().editObj.status=e}),o.Rb(26,"option",22),o.Cc(27,"Active"),o.Qb(),o.Rb(28,"option",22),o.Cc(29,"Deactive"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(30,"div",23),o.Bc(31,C,7,1,"div",24),o.Bc(32,Q,4,0,"div",24),o.Qb(),o.Qb(),o.Ob(),o.Qb()}if(2&t){const t=o.pc(3),e=o.pc(17),i=o.cc();o.Ab(5),o.ic("ngIf","new"==i.editObj.pagekey),o.Ab(5),o.ic("ngClass",o.lc(15,y,i.isFormSubmitted&&!i.editObj.pagecontent))("initialValue",i.editObj.pagecontent)("ngModel",i.editObj.pagecontent)("init",o.lc(18,S,o.kc(17,A))),o.Ab(1),o.ic("ngIf",i.isFormSubmitted&&!i.editObj.pagecontent),o.Ab(5),o.ic("ngModel",i.editObj.blog_img)("ngClass",o.lc(20,M,t.submitted&&e.invalid)),o.Ab(2),o.ic("ngIf",i.isFormSubmitted&&!i.editObj.blog_img),o.Ab(1),o.ic("ngIf",""!=i.editObj.image),o.Ab(5),o.ic("ngModel",i.editObj.status),o.Ab(2),o.ic("ngValue",1),o.Ab(2),o.ic("ngValue",0),o.Ab(3),o.ic("ngIf",""==i.postRequest),o.Ab(1),o.ic("ngIf","yes"==i.postRequest)}}const _=function(t){return[t]};let B=(()=>{class t{constructor(t,e,i,n){this.dataService=t,this.general=e,this.activatedRoute=i,this.route=n,this.loading=!0,this.postRequest="",this.disable=!1,this.pageType="",this.actionType="",this.newsUrl="",this.editFeature=!0,this.chngmode=!0,this.changeUploadTriggered=!0,this.token=localStorage.getItem("Key"),this.per=!1,this.editObj={},this.isFormSubmitted=!1,this.isGetBlogLoading=!0,this.isDataPassing=!1,this.model={_id:"",title:"",description:"",content:"",blog_image:"",status:1},this.cancelToEdit=()=>{this.actionType="all",this.changeUploadTriggered=!0},this.redirectToAdd=()=>{this.actionType="edit",this.chngmode=!1,this.pageType="add",this.newsUrl="",this.editObj={_id:"",title:"",description:"",content:"",blog_image:"",status:1}},this.redirectToEdit=t=>{let e="Active"==t.status?1:0;this.actionType="edit",this.chngmode=!0,this.pageType="edit",this.editObj={_id:t._id,title:t.title,description:t.description,content:t.content,status:e,blog_image:""},this.newsUrl=t.blog_image},this.config=this.dataService.geteditorconfig()}ngOnInit(){this.setBlogObj(),this.editObj.pagekey=this.activatedRoute.snapshot.paramMap.get("id"),"new"==this.editObj.pagekey?this.isGetBlogLoading=!1:this.getSingleData()}setBlogObj(){this.editObj={title:"",pagecontent:"",pagekey:"new",status:1}}onFileChanged(t){let e=new FileReader;const i=t.target.files[0];let n=t.target.files[0].type;return t.target.files[0].size/1024/1024>=2?(this.dataService.openAlert("error","Upload image should be less than or equal to 2MB"),void(this.changeUploadTriggered=!1)):"image/png"!=n&&"image/jpg"!=n&&"image/jpeg"!=n?(this.dataService.openAlert("error","Invalid image format"),void(this.changeUploadTriggered=!1)):(e.onload=t=>{(new Image).src=t.target.result,this.editObj.image=t.target.result},this.changeUploadTriggered=!0,e.readAsDataURL(i),void(this.editObj.blog_image=i))}getSingleData(){this.isGetBlogLoading=!0,this.dataService.postRequest("admin/getblogs",{id:this.editObj.pagekey}).subscribe(t=>{let e=t;this.isGetBlogLoading=!1,e.status?this.editObj=e.data:this.dataService.openAlert(e.status,e.message)})}dateFormats(t){}onSubmit(){let t="";if(t="edit"==this.pageType?"blogUpdate":"blogAdd",!this.changeUploadTriggered)return void this.dataService.openAlert(!1,"Invalid image/format.");var e=this.editObj.title.trim(),i=this.editObj.pagecontent.trim();if(0==e.length||0==i.length)return void this.dataService.openAlert(!1,"Form must be valid");this.postRequest="yes";const o=new FormData;o.append("_id",this.editObj._id),o.append("title",this.editObj.title),o.append("pagecontent",this.editObj.pagecontent),o.append("status",String(this.editObj.status)),o.append("blog_img",this.editObj.blog_image),this.dataService.filePostRequest("admin/"+t,o).subscribe(t=>{this.postRequest="",this.dataService.openAlert(1==t.status,t.msg),this.route.navigateByUrl(a.a.baseUrl+"/"+n.a.blogs_list)})}openConfirmationDialog(t){confirm("Are you sure want to delete?")&&this.doDelete(t)}doDelete(t){this.dataService.getRequest("cms/newsDelete/"+t).subscribe(t=>{this.dataService.openAlert(1==t.status,t.msg)})}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(c.a),o.Lb(s.a),o.Lb(r.a),o.Lb(r.b))},t.\u0275cmp=o.Fb({type:t,selectors:[["app-blogs-edit"]],decls:15,vars:13,consts:[[1,"d-flex","mb-4","page-header"],[1,"bread-crump_container"],[3,"routerLink"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["class","table-container",4,"ngIf"],[1,"table-container"],["novalidate","",3,"ngSubmit"],["f","ngForm"],[1,"card-body"],["class","form-group row",4,"ngIf"],[1,"form-group","row"],[1,"col-md-3","col-form-label"],[1,"col-md-9"],["name","pagecontent","apiKey","u3c205e0r3zwqzvtu78fsfllp8u39b47a6h9s4bne531l4jj",3,"ngClass","initialValue","ngModel","init","ngModelChange"],["class","text-warn",4,"ngIf"],[1,"col-md-6"],["type","file","name","blog_img","accept",".jpeg,.jpg,.png",1,"form-control",3,"ngModel","ngClass","change","ngModelChange"],["blog_img","ngModel"],["name","status",1,"form-control",3,"ngModel","ngModelChange"],["status","ngModel"],[3,"ngValue"],[1,"card-footer"],[4,"ngIf"],["matInput","","placeholder","Title","name","title","autocomplete","off","name","title","required","",1,"form-control",3,"ngModel","ngModelChange","keypress"],["title","ngModel"],[1,"text-warn"],["for","example-text-input",1,"col-3","col-form-label"],[1,"upload_det","col-md-6"],[1,"img-fluid",2,"height","150px","width","150px",3,"src"],[1,"btn","btn-sm","btn-primary",3,"disabled"],[1,"fa","fa-dot-circle-o"],["type","button",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fa","fa-ban"],["disabled","",1,"btn","btn-sm","btn-primary"],["role","status","aria-hidden","true",1,"spinner-grow","spinner-grow-sm"]],template:function(t,e){1&t&&(o.Rb(0,"div",0),o.Rb(1,"ul",1),o.Rb(2,"li"),o.Rb(3,"a",2),o.dc(4,"appRouter"),o.Cc(5," Home"),o.Qb(),o.Qb(),o.Rb(6,"li"),o.Rb(7,"a",2),o.dc(8,"appRouter"),o.Cc(9," Blogs"),o.Qb(),o.Qb(),o.Rb(10,"li"),o.Pb(11,3),o.Bc(12,m,2,0,"ng-container",4),o.Bc(13,f,2,1,"ng-container",5),o.Ob(),o.Qb(),o.Qb(),o.Qb(),o.Bc(14,k,33,22,"mat-card",6)),2&t&&(o.Ab(3),o.ic("routerLink",o.lc(9,_,o.ec(4,5,"dasboard"))),o.Ab(4),o.ic("routerLink",o.lc(11,_,o.ec(8,7,"blogs_list"))),o.Ab(4),o.ic("ngSwitch",e.editObj.pagekey),o.Ab(1),o.ic("ngSwitchCase","new"),o.Ab(2),o.ic("ngIf",!e.isGetBlogLoading))},directives:[r.e,l.m,l.n,l.o,l.l,b.a,d.r,d.i,d.j,g.a,l.j,d.h,d.k,d.a,d.p,d.l,d.q,p.a,d.o,u.b],pipes:[h.a],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%!important;font-size:13px}.text-overflow[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25%}  .isError .tox-tinymce{border-color:#f44336!important}.mini-alert[_ngcontent-%COMP%]{position:absolute;padding:3px 14px;width:100%;background:#efd2d0;border-radius:6px;top:-4px;color:#3e3b3b;display:flex;align-items:center}"]}),t})();var T=i("aSaG"),I=i("Q8Un"),x=i("0IaG");const L=[{path:"",component:B}];let q=(()=>{class t{}return t.\u0275mod=o.Jb({type:t}),t.\u0275inj=o.Ib({factory:function(e){return new(e||t)},imports:[[T.a,g.b,I.a,x.c,r.f.forChild(L)]]}),t})()}}]);