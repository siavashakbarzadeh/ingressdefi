(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{CjRM:function(t,e,n){"use strict";n.r(e),n.d(e,"LotteryListModule",function(){return M});var i=n("ofXK"),o=n("tyNb");const s=[{coloumnName:"sno",coloumnDisplay:"Position",isSort:!0},{coloumnName:"userAddress",coloumnDisplay:"User Address",isSort:!1,isLink:!0,isCopy:!0,link:"address"},{coloumnName:"ticket_id",coloumnDisplay:"Ticket Id",isSort:!0},{coloumnName:"tx_id",coloumnDisplay:"Transaction Hash ",type:"txId",isLink:!0,isCopy:!0,link:"tx"},{coloumnName:"status",coloumnDisplay:"Status"}],a=s.map((t,e)=>t.coloumnName);var c=n("fXoL"),l=n("ViwK"),r=n("p/XV"),b=n("bTqV"),_=n("NFeN"),u=n("Wp6s"),d=n("Qu3c"),p=n("Fpw+"),h=n("nXeD"),g=n("MZrz");function m(t,e){if(1&t&&(c.Pb(0),c.Cc(1),c.Ob()),2&t){const t=c.cc();c.Ab(1),c.Ec(" - ",null==t.contestDetails?null:t.contestDetails.contest_id," ")}}function f(t,e){if(1&t){const t=c.Sb();c.Rb(0,"button",15),c.Yb("click",function(){return c.tc(t),c.cc(2).stopBuy()}),c.Rb(1,"mat-icon"),c.Cc(2,"pan_tool"),c.Qb(),c.Cc(3," Stop Buy "),c.Qb()}}function y(t,e){if(1&t){const t=c.Sb();c.Rb(0,"button",16),c.Yb("click",function(){return c.tc(t),c.cc(2).drawing()}),c.Rb(1,"mat-icon"),c.Cc(2,"confirmation_number"),c.Qb(),c.Cc(3," Make Winning Tickets "),c.Qb()}}function v(t,e){if(1&t&&(c.Rb(0,"div",12),c.Bc(1,f,4,0,"button",13),c.Bc(2,y,4,0,"button",14),c.Qb()),2&t){const t=c.cc();c.Ab(1),c.ic("ngIf","Active"==(null==t.contestDetails?null:t.contestDetails.status)),c.Ab(1),c.ic("ngIf","Active"!=(null==t.contestDetails?null:t.contestDetails.status)&&"Active"!=(null==t.contestDetails?null:t.contestDetails.winning_status))}}function C(t,e){if(1&t){const t=c.Sb();c.Rb(0,"mat-card",17),c.Rb(1,"div",18),c.Rb(2,"div",19),c.Cc(3),c.Rb(4,"span"),c.Cc(5,"Contest Id"),c.Qb(),c.Qb(),c.Rb(6,"div",20),c.Rb(7,"span"),c.Cc(8),c.dc(9,"textHide"),c.Rb(10,"small"),c.Rb(11,"button",21),c.Yb("click",function(){c.tc(t);const e=c.cc();return e.dataService.copyText(e.contestDetails.tx_id)}),c.Rb(12,"mat-icon",22),c.Cc(13," content_copy"),c.Qb(),c.Qb(),c.Rb(14,"button",23),c.Yb("click",function(){c.tc(t);const e=c.cc();return e.dataService.goTo("tx",e.contestDetails.tx_id)}),c.Rb(15,"mat-icon",22),c.Cc(16,"north_east"),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Rb(17,"span",24),c.Cc(18,"Hash Id"),c.Qb(),c.Qb(),c.Rb(19,"div",20),c.Cc(20),c.dc(21,"date"),c.Rb(22,"span",24),c.Cc(23,"Created Date"),c.Qb(),c.Qb(),c.Rb(24,"div",20),c.Cc(25),c.dc(26,"date"),c.Rb(27,"span",24),c.Cc(28,"Expired Date"),c.Qb(),c.Qb(),c.Rb(29,"div",20),c.Cc(30),c.Rb(31,"span",24),c.Cc(32,"Winning Ticket"),c.Qb(),c.Qb(),c.Qb(),c.Qb()}if(2&t){const t=c.cc();c.Ab(3),c.Ec(" ",null==t.contestDetails?null:t.contestDetails.contest_id," "),c.Ab(5),c.Ec(" ",c.ec(9,7,null==t.contestDetails?null:t.contestDetails.start_tx_id)," "),c.Ab(3),c.ic("matTooltip","Copy Transction Id"),c.Ab(3),c.ic("matTooltip","See Transction"),c.Ab(6),c.Ec(" ",c.ec(21,9,null==t.contestDetails?null:t.contestDetails.created_date)," "),c.Ab(5),c.Ec(" ",c.ec(26,11,null==t.contestDetails?null:t.contestDetails.expired_date)," "),c.Ab(5),c.Ec(" ",null==t.contestDetails?null:t.contestDetails.winning_ticket_number," ")}}function x(t,e){if(1&t&&c.Mb(0,"app-list-table",25),2&t){const t=c.cc();c.ic("tableData",t.tableData)}}const w=function(t){return[t]};let D=(()=>{class t{constructor(t,e,n){this.lotteryService=t,this.dataService=e,this.activatedRoute=n,this.tableData={displayedColumns:a,displayedDatas:s,getAllApi:"lottery/lottery_ticket_list",contest_id:""},this.showTable=!0,this.activatedRoute.paramMap.subscribe(t=>{this.loadConstructor()})}ngOnInit(){}getContest(){this.dataService.postRequest("lottery/get_single_contest",{contest_id:this.tableData.contest_id}).subscribe(t=>{console.log(t,"suc"),t.status&&(this.contestDetails=t.data)})}loadConstructor(){this.tableData.contest_id=this.activatedRoute.snapshot.paramMap.get("id"),"new"==this.tableData.contest_id||this.getContest()}isLoign(){return!!this.dataService.metaDetails.isMetaLogin||(this.dataService.openAlert(!1,"Please Login to Further Action"),!1)}async stopBuy(){await this.isLoign()&&(this.dataService.isOverlay=!0,this.lotteryService.stopBuy().then(t=>{t.status&&(this.dataService.isOverlay=!1,this.dataService.postRequest("lottery/update_contest",{_id:this.contestDetails._id,stop_tx_id:t.result}).subscribe(t=>{t.status&&(this.getContest(),this.dataService.isOverlay=!1,this.dataService.openAlert(!0,"successfully Contest Stoped"))})),console.log(t,"________________ suc")}).catch(t=>{this.dataService.isOverlay=!1}))}getRandom(){let t=[];return t[0]=(Math.floor(14*Math.random())+1).toString().trim(),t[1]=(Math.floor(14*Math.random())+1).toString().trim(),t[2]=(Math.floor(14*Math.random())+1).toString().trim(),t[3]=(Math.floor(14*Math.random())+1).toString().trim(),t}async drawing(){if(!(await this.isLoign()))return;this.dataService.isOverlay=!0;let t=await(new Date).getTime();console.log(t,"ticketNumbers"),this.lotteryService.Drawing(t).then(t=>{t.status&&(console.log(t,"______________ suc"),this.setWinningContestApiCall(t.txId))})}async setWinningContestApiCall(t){let e=[],n=[];for(let i=0;i<4;i++)await this.lotteryService.historyNumbers(this.contestDetails.contest_id,i).then(async o=>{if(console.log(o,"______________ suc"),o.status&&(await e.push(o.result),3==await i))for(let i=0;i<e.length;i++)await this.lotteryService.historyAmounts(this.contestDetails.contest_id,i).then(async o=>{if(await n.push(o.result),console.log(n,"______________ historyAmountsValues"),3==await i){let i=await(+n[0]/1e18).toFixed(0),o=await(+n[1]/1e18).toFixed(0),s=await(+n[2]/1e18).toFixed(0),a=await(+n[3]/1e18).toFixed(0);console.log(a,"____________ winner3");let c=await(50*parseInt(i)/100).toFixed(0),l=await(20*parseInt(i)/100).toFixed(0),r=await(10*parseInt(i)/100).toFixed(0),b=await(10*parseInt(i)/100).toFixed(0),_=await(parseInt(i)-parseInt(b)).toFixed(0),u={_id:this.contestDetails._id,winning_value:e,txId:t,total_amount:i,winner1:o,winner2:s,winner3:a,burned:b,poll_size:_,price1:c,price2:l,price3:r};this.dataService.isOverlay=!1,console.log("set_winning_contest obj =====>",u),await this.dataService.postRequest("lottery/set_winning_contest",u).subscribe(t=>{t.status&&(this.getContest(),this.dataService.openAlert(!0,"successfully Contest Stoped"))})}})})}async setHistry(){let t=[];for(let e=0;e<4;e++)this.lotteryService.historyNumbers(0,e).then(n=>{if(console.log(n,"___________________ suc"),n.status&&(t.push(n.result),console.log(e,"________ index"),3==e)){let e={_id:this.contestDetails._id,winning_value:t};console.log(e,"________ index"),this.dataService.postRequest("lottery/set_winning_contest",e).subscribe(t=>{t.status&&this.dataService.openAlert(!0,"successfully Contest Stoped")})}})}}return t.\u0275fac=function(e){return new(e||t)(c.Lb(l.a),c.Lb(r.a),c.Lb(o.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-lottery-list"]],decls:21,vars:14,consts:[[1,"d-flex","mb-4","page-header"],[1,"bread-crump_container"],[3,"routerLink"],[4,"ngIf"],[1,"spacer"],["class","group-button",4,"ngIf"],[1,"container-fluid"],[1,"row"],[1,"col-md-12","mb-4"],["class"," head-box",4,"ngIf"],[1,"col-md-12"],[3,"tableData",4,"ngIf"],[1,"group-button"],["mat-button","","color","warn",3,"click",4,"ngIf"],["mat-button","","color","primary",3,"click",4,"ngIf"],["mat-button","","color","warn",3,"click"],["mat-button","","color","primary",3,"click"],[1,"head-box"],[1,"d-flex"],[1,"flex-1","first-obj"],[1,"flex-1","box-content"],["mat-button","","mat-icon-button","",3,"matTooltip","click"],[1,"small-icon"],["color","primary","mat-button","","mat-icon-button","",3,"matTooltip","click"],[1,"bt-text"],[3,"tableData"]],template:function(t,e){1&t&&(c.Rb(0,"div",0),c.Rb(1,"ul",1),c.Rb(2,"li"),c.Rb(3,"a",2),c.dc(4,"appRouter"),c.Cc(5," Home"),c.Qb(),c.Qb(),c.Rb(6,"li"),c.Rb(7,"a",2),c.dc(8,"appRouter"),c.Cc(9," Lottery Contest List"),c.Qb(),c.Qb(),c.Rb(10,"li"),c.Cc(11,"Lottery List "),c.Bc(12,m,2,1,"ng-container",3),c.Qb(),c.Qb(),c.Mb(13,"div",4),c.Bc(14,v,3,2,"div",5),c.Qb(),c.Rb(15,"div",6),c.Rb(16,"div",7),c.Rb(17,"div",8),c.Bc(18,C,33,13,"mat-card",9),c.Qb(),c.Rb(19,"div",10),c.Bc(20,x,1,1,"app-list-table",11),c.Qb(),c.Qb(),c.Qb()),2&t&&(c.Ab(3),c.ic("routerLink",c.lc(10,w,c.ec(4,6,"dashboard"))),c.Ab(4),c.ic("routerLink",c.lc(12,w,c.ec(8,8,"lottery_contest_list"))),c.Ab(5),c.ic("ngIf","new"!=(null==e.contestDetails?null:e.contestDetails.contest_id)),c.Ab(2),c.ic("ngIf",e.contestDetails),c.Ab(4),c.ic("ngIf",e.contestDetails),c.Ab(2),c.ic("ngIf",e.showTable))},directives:[o.e,i.l,b.b,_.a,u.a,d.a,p.a],pipes:[h.a,g.a,i.e],styles:[".head-box[_ngcontent-%COMP%]{padding:0;min-height:70px}.head-box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}.head-box[_ngcontent-%COMP%]   .first-obj[_ngcontent-%COMP%]{text-align:center;background:#4481eb;min-height:70px;flex-direction:column;color:#fff}.head-box[_ngcontent-%COMP%]   .box-content[_ngcontent-%COMP%], .head-box[_ngcontent-%COMP%]   .first-obj[_ngcontent-%COMP%]{align-items:center;display:flex;justify-content:center;padding:10px}.head-box[_ngcontent-%COMP%]   .box-content[_ngcontent-%COMP%]{flex-direction:column;border-right:1px solid #ddd;flex:1}small[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:15px}.bt-text[_ngcontent-%COMP%]{position:absolute;bottom:7px;color:#8e8b8b}"]}),t})();var R=n("aSaG"),S=n("7o6p"),Q=n("kW4q");const A=[{path:":id",component:D}];let M=(()=>{class t{}return t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({factory:function(e){return new(e||t)},imports:[[i.c,R.a,S.a,Q.a,o.f.forChild(A)]]}),t})()}}]);