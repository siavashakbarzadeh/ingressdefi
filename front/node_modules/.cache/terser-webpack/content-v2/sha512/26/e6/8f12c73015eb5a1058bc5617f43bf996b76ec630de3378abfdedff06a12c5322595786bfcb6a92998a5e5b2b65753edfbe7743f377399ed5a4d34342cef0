{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{B0yG:function(t,e,i){\"use strict\";i.r(e),i.d(e,\"UserModule\",(function(){return ot}));var s=i(\"ofXK\"),a=i(\"tyNb\"),r=i(\"mrSG\"),n=(i(\"3bqL\"),i(\"CdDH\")),c=i(\"7Kiy\"),o=i(\"paXb\"),l=i(\"9IWX\"),b=i(\"fXoL\"),d=i(\"s1dW\"),h=i(\"vqsv\"),u=i(\"K3ix\"),p=i(\"4fUM\"),m=i(\"44PX\"),g=i(\"3Pt+\");function f(t,e){1&t&&b.Ic(0,\" Collected \")}function v(t,e){if(1&t&&b.Sb(0,\"img\",7),2&t){const t=b.gc().$implicit;b.oc(\"src\",t.profilepicture?t.profilepicture:\"assets/images/prof.png\",b.Bc)}}function w(t,e){1&t&&b.Sb(0,\"img\",38)}function I(t,e){if(1&t&&b.Sb(0,\"img\",7),2&t){const t=b.gc().$implicit;b.oc(\"src\",t.ownerpicture?t.ownerpicture:\"assets/images/prof1.png\",b.Bc)}}function y(t,e){1&t&&b.Sb(0,\"img\",39)}function S(t,e){if(1&t&&b.Sb(0,\"img\",43),2&t){const t=b.gc(2).$implicit;b.oc(\"src\",t.image,b.Bc)}}function W(t,e){1&t&&b.Sb(0,\"img\",44)}function X(t,e){if(1&t){const t=b.Yb();b.Xb(0,\"div\"),b.Xb(1,\"a\",40),b.ec(\"click\",(function(){b.zc(t);const e=b.gc().$implicit;return b.gc(2).myFunc1(e.itemId)})),b.Gc(2,S,1,1,\"img\",41),b.Gc(3,W,1,0,\"img\",42),b.Wb(),b.Wb()}if(2&t){const t=b.gc().$implicit;b.Fb(2),b.nc(\"ngIf\",\"\"!=t.image),b.Fb(1),b.nc(\"ngIf\",\"\"==t.image)}}function k(t,e){if(1&t){const t=b.Yb();b.Xb(0,\"div\"),b.Xb(1,\"a\",40),b.ec(\"click\",(function(){b.zc(t);const e=b.gc().$implicit;return b.gc(2).myFunc1(e.itemId)})),b.Sb(2,\"img\",44),b.Wb(),b.Wb()}}function D(t,e){if(1&t){const t=b.Yb();b.Xb(0,\"div\",19),b.Xb(1,\"div\",20),b.Xb(2,\"div\",21),b.Xb(3,\"div\",22),b.Xb(4,\"div\",23),b.Gc(5,v,1,1,\"img\",24),b.Gc(6,w,1,0,\"img\",25),b.Wb(),b.Xb(7,\"div\"),b.Xb(8,\"h3\",26),b.Ic(9),b.Wb(),b.Xb(10,\"p\",26),b.Ic(11,\"Artist\"),b.Wb(),b.Wb(),b.Wb(),b.Xb(12,\"div\",22),b.Xb(13,\"div\",27),b.Xb(14,\"h3\",26),b.Ic(15),b.Wb(),b.Xb(16,\"p\",26),b.Ic(17,\"Artist\"),b.Wb(),b.Wb(),b.Xb(18,\"div\",28),b.Gc(19,I,1,1,\"img\",24),b.Gc(20,y,1,0,\"img\",29),b.Wb(),b.Wb(),b.Wb(),b.Gc(21,X,4,2,\"div\",30),b.Gc(22,k,3,0,\"div\",30),b.Xb(23,\"div\",31),b.Xb(24,\"h3\"),b.Ic(25),b.Wb(),b.Sb(26,\"div\",32),b.Xb(27,\"div\",33),b.Xb(28,\"div\",34),b.Xb(29,\"h3\",26),b.Ic(30),b.Wb(),b.Xb(31,\"p\",35),b.Ic(32,\"Price\"),b.Wb(),b.Wb(),b.Xb(33,\"div\",36),b.Xb(34,\"button\",37),b.ec(\"click\",(function(){b.zc(t);const i=e.$implicit;return b.gc(2).saleItemnew(i)})),b.Ic(35,\"sale now\"),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb()}if(2&t){const t=e.$implicit;b.Fb(5),b.nc(\"ngIf\",\"\"!=t.profilepicture),b.Fb(1),b.nc(\"ngIf\",\"\"==t.profilepicture),b.Fb(3),b.Jc(t.username),b.Fb(6),b.Jc(t.ownername),b.Fb(4),b.nc(\"ngIf\",\"\"!=t.ownerpicture),b.Fb(1),b.nc(\"ngIf\",\"\"==t.ownerpicture),b.Fb(1),b.nc(\"ngIf\",\"add\"==t.type),b.Fb(1),b.nc(\"ngIf\",\"add\"!=t.type),b.Fb(3),b.Jc(t.name),b.Fb(5),b.Lc(\"\",t.price,\" \",t.tocurrency,\"\")}}function F(t,e){if(1&t&&(b.Xb(0,\"div\",0),b.Gc(1,D,36,11,\"div\",18),b.Wb()),2&t){const t=b.gc();b.Fb(1),b.nc(\"ngForOf\",t.owned)}}function x(t,e){1&t&&(b.Xb(0,\"div\",0),b.Ic(1,\" No items collected \"),b.Wb())}function B(t,e){1&t&&b.Ic(0,\" On Sale \")}function T(t,e){if(1&t&&b.Sb(0,\"img\",7),2&t){const t=b.gc().$implicit;b.oc(\"src\",t.profilepicture?t.profilepicture:\"assets/images/prof.png\",b.Bc)}}function R(t,e){1&t&&b.Sb(0,\"img\",38)}function O(t,e){if(1&t&&b.Sb(0,\"img\",7),2&t){const t=b.gc().$implicit;b.oc(\"src\",t.ownerpicture?t.ownerpicture:\"assets/images/prof1.png\",b.Bc)}}function A(t,e){1&t&&b.Sb(0,\"img\",39)}function G(t,e){if(1&t){const t=b.Yb();b.Xb(0,\"div\",19),b.Xb(1,\"div\",20),b.Xb(2,\"div\",21),b.Xb(3,\"div\",22),b.Xb(4,\"div\",23),b.Gc(5,T,1,1,\"img\",24),b.Gc(6,R,1,0,\"img\",25),b.Wb(),b.Xb(7,\"div\"),b.Xb(8,\"h3\",26),b.Ic(9),b.Wb(),b.Xb(10,\"p\",26),b.Ic(11,\"Artist\"),b.Wb(),b.Wb(),b.Wb(),b.Xb(12,\"div\",22),b.Xb(13,\"div\",27),b.Xb(14,\"h3\",26),b.Ic(15),b.Wb(),b.Xb(16,\"p\",26),b.Ic(17,\"Artist\"),b.Wb(),b.Wb(),b.Xb(18,\"div\",28),b.Gc(19,O,1,1,\"img\",24),b.Gc(20,A,1,0,\"img\",29),b.Wb(),b.Wb(),b.Wb(),b.Xb(21,\"a\",40),b.ec(\"click\",(function(){b.zc(t);const i=e.$implicit;return b.gc(2).myFunc1(i.itemId)})),b.Sb(22,\"img\",44),b.Wb(),b.Xb(23,\"div\",31),b.Xb(24,\"h3\"),b.Ic(25),b.Wb(),b.Sb(26,\"div\",32),b.Xb(27,\"div\",33),b.Xb(28,\"div\",34),b.Xb(29,\"h3\",26),b.Ic(30),b.Wb(),b.Xb(31,\"p\",35),b.Ic(32,\"Price\"),b.Wb(),b.Wb(),b.Xb(33,\"div\",36),b.Xb(34,\"h3\",26),b.Ic(35),b.Wb(),b.Xb(36,\"p\",35),b.Ic(37,\"Suppply\"),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb()}if(2&t){const t=e.$implicit;b.Fb(5),b.nc(\"ngIf\",\"\"!=t.profilepicture),b.Fb(1),b.nc(\"ngIf\",\"\"==t.profilepicture),b.Fb(3),b.Jc(t.username),b.Fb(6),b.Jc(t.ownername),b.Fb(4),b.nc(\"ngIf\",\"\"!=t.ownerpicture),b.Fb(1),b.nc(\"ngIf\",\"\"==t.ownerpicture),b.Fb(5),b.Jc(t.name),b.Fb(5),b.Lc(\"\",t.price,\" \",t.currency,\"\"),b.Fb(5),b.Jc(t.supply)}}function q(t,e){if(1&t&&(b.Xb(0,\"div\",0),b.Gc(1,G,38,10,\"div\",18),b.Wb()),2&t){const t=b.gc();b.Fb(1),b.nc(\"ngForOf\",t.created)}}function C(t,e){1&t&&(b.Xb(0,\"div\",0),b.Ic(1,\" No items found \"),b.Wb())}function P(t,e){1&t&&b.Ic(0,\" Favourite \")}function U(t,e){if(1&t&&b.Sb(0,\"img\",7),2&t){const t=b.gc().$implicit,e=b.gc(2);b.oc(\"src\",t.creator_img?e.item.profilepicture:\"assets/images/prof.png\",b.Bc)}}function M(t,e){1&t&&b.Sb(0,\"img\",38)}function N(t,e){if(1&t&&(b.Xb(0,\"div\",19),b.Xb(1,\"div\",20),b.Xb(2,\"div\",21),b.Xb(3,\"div\",22),b.Sb(4,\"img\",45),b.Xb(5,\"div\",23),b.Gc(6,U,1,1,\"img\",24),b.Gc(7,M,1,0,\"img\",25),b.Wb(),b.Xb(8,\"div\"),b.Xb(9,\"h3\",26),b.Ic(10),b.Wb(),b.Xb(11,\"p\",26),b.Ic(12,\"Artist\"),b.Wb(),b.Wb(),b.Wb(),b.Xb(13,\"div\",22),b.Xb(14,\"div\",27),b.Xb(15,\"h3\",26),b.Ic(16),b.Wb(),b.Xb(17,\"p\",26),b.Ic(18,\"Artist\"),b.Wb(),b.Wb(),b.Xb(19,\"div\",28),b.Sb(20,\"img\",39),b.Wb(),b.Wb(),b.Wb(),b.Sb(21,\"img\",43),b.Xb(22,\"div\",31),b.Xb(23,\"h3\"),b.Ic(24),b.Wb(),b.Wb(),b.Wb(),b.Wb()),2&t){const t=e.$implicit;b.Fb(6),b.nc(\"ngIf\",\"\"!=t.creator_img),b.Fb(1),b.nc(\"ngIf\",\"\"==t.creator_img),b.Fb(3),b.Jc(t.creator_name),b.Fb(6),b.Jc(t.owner_name),b.Fb(5),b.oc(\"src\",t.image,b.Bc),b.Fb(3),b.Jc(t.name)}}function j(t,e){if(1&t&&(b.Xb(0,\"div\",0),b.Gc(1,N,25,6,\"div\",18),b.Wb()),2&t){const t=b.gc();b.Fb(1),b.nc(\"ngForOf\",t.favorites)}}function J(t,e){1&t&&(b.Xb(0,\"div\",0),b.Ic(1,\" No favorites found \"),b.Wb())}function $(t,e){1&t&&(b.Xb(0,\"div\"),b.Ic(1,\"Type of Sale is required\"),b.Wb())}function E(t,e){if(1&t&&(b.Xb(0,\"div\",74),b.Gc(1,$,2,0,\"div\",30),b.Wb()),2&t){b.gc();const t=b.xc(21);b.Fb(1),b.nc(\"ngIf\",t.errors.required)}}function z(t,e){1&t&&(b.Xb(0,\"div\"),b.Ic(1,\"Address is required\"),b.Wb())}function H(t,e){if(1&t&&(b.Xb(0,\"div\",74),b.Gc(1,z,2,0,\"div\",30),b.Wb()),2&t){b.gc();const t=b.xc(7);b.Fb(1),b.nc(\"ngIf\",t.errors.required)}}const L=function(t){return{\"is-invalid\":t}};function Y(t,e){if(1&t){const t=b.Yb();b.Xb(0,\"div\",58),b.Xb(1,\"label\",75),b.Ic(2,\"To User Address \"),b.Xb(3,\"span\",60),b.Ic(4,\"*\"),b.Wb(),b.Wb(),b.Sb(5,\"br\"),b.Xb(6,\"input\",76,77),b.ec(\"ngModelChange\",(function(e){return b.zc(t),b.gc(2).sItemObj.address=e})),b.Wb(),b.Gc(8,H,2,1,\"div\",66),b.Wb()}if(2&t){const t=b.xc(7);b.gc();const e=b.xc(10),i=b.gc();b.Fb(6),b.nc(\"ngClass\",b.rc(3,L,e.submitted&&t.invalid))(\"ngModel\",i.sItemObj.address),b.Fb(2),b.nc(\"ngIf\",e.submitted&&t.invalid)}}function _(t,e){1&t&&(b.Xb(0,\"label\",78),b.Ic(1,\"Buy Price \"),b.Xb(2,\"span\",60),b.Ic(3,\"*\"),b.Wb(),b.Wb())}function V(t,e){1&t&&(b.Xb(0,\"label\",78),b.Ic(1,\"Reserved Price\"),b.Wb())}function K(t,e){1&t&&(b.Xb(0,\"div\"),b.Ic(1,\"Price is required\"),b.Wb())}function Q(t,e){if(1&t&&(b.Xb(0,\"div\",74),b.Gc(1,K,2,0,\"div\",30),b.Wb()),2&t){b.gc();const t=b.xc(36);b.Fb(1),b.nc(\"ngIf\",t.errors.required)}}function Z(t,e){1&t&&(b.Xb(0,\"button\",79),b.Ic(1,\"Submit\"),b.Wb())}function tt(t,e){1&t&&(b.Xb(0,\"label\",80),b.Ic(1,\"Loading...\"),b.Wb())}function et(t,e){if(1&t){const t=b.Yb();b.Xb(0,\"div\",46),b.Xb(1,\"div\",47),b.Xb(2,\"div\",48),b.Xb(3,\"div\",49),b.Xb(4,\"button\",50),b.ec(\"click\",(function(){b.zc(t);const e=b.gc();return null==e.modalRef?null:e.modalRef.hide()})),b.Ic(5,\"\\xd7\"),b.Wb(),b.Xb(6,\"h3\",51),b.Ic(7,\" Sale Your NFT \"),b.Wb(),b.Wb(),b.Xb(8,\"div\",52),b.Xb(9,\"form\",53,54),b.ec(\"ngSubmit\",(function(){b.zc(t);const e=b.xc(10),i=b.gc();return e.form.valid&&i.onModalSubmit(e.value)})),b.Xb(11,\"div\",55),b.Xb(12,\"div\",56),b.Xb(13,\"div\",57),b.Xb(14,\"div\",58),b.Xb(15,\"label\",59),b.Ic(16,\"Choose Type of Sale \"),b.Xb(17,\"span\",60),b.Ic(18,\"*\"),b.Wb(),b.Wb(),b.Sb(19,\"br\"),b.Xb(20,\"select\",61,62),b.ec(\"change\",(function(e){return b.zc(t),b.gc().saleType(e.target.value)})),b.Xb(22,\"option\",63),b.Ic(23,\"Reserved Price\"),b.Wb(),b.Xb(24,\"option\",64),b.Ic(25,\"Private Sale\"),b.Wb(),b.Xb(26,\"option\",65),b.Ic(27,\"Auction Bid\"),b.Wb(),b.Wb(),b.Gc(28,E,2,1,\"div\",66),b.Wb(),b.Gc(29,Y,9,5,\"div\",67),b.Xb(30,\"div\",58),b.Gc(31,_,4,0,\"label\",68),b.Sb(32,\"br\"),b.Gc(33,V,2,0,\"label\",68),b.Sb(34,\"br\"),b.Xb(35,\"input\",69,70),b.ec(\"ngModelChange\",(function(e){return b.zc(t),b.gc().sItemObj.price=e})),b.Wb(),b.Gc(37,Q,2,1,\"div\",66),b.Wb(),b.Xb(38,\"div\",71),b.Gc(39,Z,2,0,\"button\",72),b.Gc(40,tt,2,0,\"label\",73),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb()}if(2&t){const t=b.xc(10),e=b.xc(21),i=b.xc(36),s=b.gc();b.Fb(28),b.nc(\"ngIf\",t.submitted&&e.invalid),b.Fb(1),b.nc(\"ngIf\",\"private\"==s.saletype),b.Fb(2),b.nc(\"ngIf\",\"fixed\"!=s.saletype),b.Fb(2),b.nc(\"ngIf\",\"fixed\"==s.saletype),b.Fb(2),b.nc(\"ngClass\",b.rc(9,L,t.submitted&&i.invalid))(\"ngModel\",s.sItemObj.price),b.Fb(2),b.nc(\"ngIf\",t.submitted&&i.invalid),b.Fb(2),b.nc(\"ngIf\",!s.msubmitted),b.Fb(1),b.nc(\"ngIf\",s.msubmitted)}}let it=(()=>{class t{constructor(t,e,i,s,a,r){this.activatedRoute=t,this.route=e,this.service=i,this.toasterService=s,this.modalService=a,this.nftService=r,this.profile={},this.favorites={},this.owned={},this.created={},this.favoriteslength=0,this.userId={},this.limit=6,this.skip=6,this.bsValue=new Date,this.maxDate=new Date,this.minDate=new Date,this.starttime=new Date,this.endtime=new Date,this.startDate=new Date,this.endDate=new Date,this.apprToken={},this.apprTokenId={},this.apprTokenABI={},this.token=localStorage.getItem(\"Game-Token\"),this.itemObj={},this.items=[],this.sItem={},this.sItemObj={},this.msubmitted=!1,this.saletype=\"fixed\",this.selectcurr=\"\",this.buycurr=\"\",this.buytokenaddr=\"\",this.publishData={},this.submitted=!1,this.privateitems={}}ngOnInit(){this.service.isOverlay=!1,this.endminDate=new Date,this.endmaxDate=new Date,this.endminDate.setDate(this.endminDate.getDate()),this.endmaxDate.setDate(this.endmaxDate.getDate()+7),this.getProfile(),this.getCollections(),this.getOnSale(),this.getSaved(),this.getCurrency(),this.getOnSalePrivate()}getProfile(){this.service.postRequest(\"users/user\",{}).subscribe(t=>{t.status?this.profile=t.data:(this.toasterService.show(t.status,t.msg),this.route.navigateByUrl(\"/market\"))})}getCurrency(){this.service.postRequest(\"collection/getNftCurrency\",{}).subscribe(t=>{let e=t;e.status?this.currencies=e.data:this.toasterService.show(!1,e.msg)})}getCollections(){this.service.postRequest(\"users/userCollected\",{skip:0,limit:this.limit}).subscribe(t=>{t.status&&(this.owned=t.data)})}getOnSale(){this.service.postRequest(\"collection/userItems\",{skip:0,limit:this.limit}).subscribe(t=>{let e=t;e.status&&(console.log(\"responseData.dataresponseData.data\",e.data),this.created=e.data)})}getOnSalePrivate(){this.service.postRequest(\"collection/getmyprivate\",{skip:0,limit:this.limit}).subscribe(t=>{t.status&&(this.privateitems=t.data)})}getSaved(){this.service.postRequest(\"users/userfavorites\",{skip:0,limit:this.limit}).subscribe(t=>{1==t.status?this.favorites=t.data:(this.toasterService.show(t.status,t.msg),this.route.navigateByUrl(\"/market\"))})}myFunc(t){this.route.navigate([\"/item-details/\"],{queryParams:{id:encodeURIComponent(t),type:0}})}myFunc1(t){this.route.navigate([\"/item-details/\"],{queryParams:{id:encodeURIComponent(t),type:1}})}openModal(t){if(\"\"!=this.sItem.item_name&&\"\"!=this.sItem.description&&\"\"!=this.sItem.item_image)var e=!0;else e=!1;e&&(this.modalRef=this.modalService.show(t))}getItems(t){t?this.service.postRequest(\"collection/getItems\",{id:t,skip:0,limit:this.limit}).subscribe(t=>{t.status&&(this.items=t.data)}):(this.toasterService.show(!1,\"Something went wrong\"),this.route.navigateByUrl(\"market\"))}saleItemnew(t){if(t)if(\"import\"==t.type)this.service.postRequest(\"users/getContract\",{contractid:t.contractId}).subscribe(e=>{if(e.status){let i=e.data;this.apprToken=i.contract,this.apprTokenABI=i.abi,this.Offlinesalefn(this.apprToken,this.apprTokenABI,t)}});else{let e=t.currency;this.apprToken=l.a[0][e].address,this.apprTokenId=l.a[0][e].tokenid,\"ERC721\"==e?this.apprTokenABI=n.a:\"WBNB\"==e?this.apprTokenABI=c.a:\"ERC20\"==e&&(this.apprTokenABI=o.a),this.Offlinesalefn(this.apprToken,this.apprTokenABI,t)}else this.toasterService.show(!1,\"Something went wrong\"),this.route.navigateByUrl(\"market\")}Offlinesalefn(t,e,i){return Object(r.a)(this,void 0,void 0,(function*(){if(\"add\"==i.type)var s=e;else s=JSON.parse(e);let a=this.service.metaDeatails.account;if(!(yield this.nftService.approveSellFun(t,s,i.selltokenid,a)).result)return this.toasterService.show(!1,\"Something went wrong, Please Try Again.\"),void this.route.navigate([\"/collection\"]);{window.web3=window.web3.currentProvider,window.web3=new window.Web3(window.ethereum),yield this.nftService.getweiValue(i.price);var r=yield window.web3.eth.getBlockNumber();Number(r),Number(10);let e=9e5,s=(new Date).getTime()+e,n=Math.floor(Math.random()*(new Date).getTime()),c=[[a,[t,i.selltokenid,\"1\"],[\"0xae13d989dac2f0debff460ac112a837c89baa7cd\",(1e18*i.price).toString(),\"0\"]],i.spid.toString(),(1e18*i.price).toString(),\"40\",n.toString(),s,\"1\"],o=yield this.nftService.orderHash(c),l=yield window.web3.eth.personal.sign(o.result,a,\"\"),b=l.slice(0,66),d=\"0x\"+l.slice(66,130),h=[\"0x\"+l.slice(130,132),b,d];o&&h?this.service.postRequest(\"collection/offlinesale\",{id:i.itemId,sellorder:{order:c,vrs:h}}).subscribe(t=>{let e=t;e.status?(this.sItem=e.data,this.toasterService.show(!0,e.msg)):this.toasterService.show(!1,e.msg),this.route.navigateByUrl(\"market\")}):this.toasterService.show(!1,\"Unable to sell, please try again\")}}))}saleItem(t){t?this.service.postRequest(\"collection/getItem\",{id:t}).subscribe(t=>{t.status&&(this.sItem=t.data)}):(this.toasterService.show(!1,\"Something went wrong\"),this.route.navigateByUrl(\"market\"))}loadmore(t){this.service.postRequest(\"collection/getItems\",{id:this.pageKey,skip:this.skip,limit:this.limit}).subscribe(t=>{this.items.push(...t.data),this.skip=this.skip+this.limit})}saleType(t){this.saletype=t,\"auction\"==t?(this.startminDate=new Date,this.startmaxDate=new Date,this.startminDate.setDate(this.startminDate.getDate()),this.startmaxDate.setDate(this.startmaxDate.getDate()+30),this.endminDate.setDate(this.endminDate.getDate()+7),this.endmaxDate.setDate(this.endminDate.getDate()+7)):(this.endminDate=new Date,this.endmaxDate=new Date,this.endminDate.setDate(this.endminDate.getDate()),this.endmaxDate.setDate(this.endmaxDate.getDate()+7))}changeCurr(t){this.selectcurr=t}changeBuyCurr(t){this.buycurr=t}selectDate(t,e){\"from\"==e?(this.selectedFromDate=t,this.endminDate=new Date,this.endmaxDate=new Date,this.endmaxDate.setDate(t.getDate()+1),this.endmaxDate.setDate(t.getDate()+7)):(this.selectedEndDate=t,this.startminDate=new Date,this.startmaxDate=new Date,this.startminDate.setDate(this.selectedEndDate.getDate()-7),this.startmaxDate.setDate(this.selectedEndDate.getDate()-1))}onModalSubmit(t){return Object(r.a)(this,void 0,void 0,(function*(){this.submitted=!0,this.msubmitted=!0,this.service.isOverlay=!0;let e=t;var i=this.sItem.currency;if(!this.service.metaDeatails.account)return this.toasterService.show(!1,\"Please login with metamask\"),void(this.service.isOverlay=!1);let s={bid:e.bid?e.bid:\"\",supply:\"single\"!=this.sItem.objtype&&\"\"!=this.sItem.objtype&&null!=e.supply&&\"\"!=e.supply?e.supply:1,toprivate:e.address?e.address:\"\",saletype:this.saletype,currency:this.sItem.currency,tocurrency:\"WBNB\",sellnftid:this.sItem.selltokenid,sellnftaddr:this.sItem.selltoken,sellassettype:l.a[0][i].astype,buytokenid:l.a[0].WBNB.tokenid,buytokenadr:l.a[0].WBNB.address,buyassettype:l.a[0].WBNB.astype,price:e.price,itemId:this.sItem.itemId,startdate:\"\"!=e.sdate&&null!=e.sdate&&null!=e.sdate?e.sdate:\"\",starttime:\"\"!=e.starttime&&null!=e.starttime&&null!=e.starttime?e.starttime:\"\",enddate:\"\"!=e.endate&&null!=e.endate&&null!=e.endate?e.endate:\"\",endtime:\"\"!=e.endtime&&null!=e.endtime&&null!=e.endtime?e.endtime:\"\"};this.publishData.saletype=this.saletype,this.publishData.itemid=this.sItem.itemId,this.publishData.edition=1,this.publishData.house=this.sItem.house,this.publishData.rent=this.sItem.rent,this.service.filePostRequest(\"collection/updateItem\",s).subscribe(t=>{t.status?(\"private\"==this.saletype?(this.publishData.toprivate=e.address?e.address:\"\",this.privatesale(e.address,this.sItem.itemId)):\"fixed\"==this.saletype?this.fixedSale(this.sItem.itemId):this.auctionSale(this.sItem.itemId),this.modalRef.hide()):(this.service.isOverlay=!1,this.toasterService.show(!1,t.msg))})}))}privatesale(t,e){t&&e&&this.service.postRequest(\"checkuser\",{address:t}).subscribe(t=>{if(!t.status)return this.service.isOverlay=!1,void this.toasterService.show(!1,\"No Such User Found\");this.service.postRequest(\"collection/getItem\",{id:e}).subscribe(t=>{if(!t.status)return this.service.isOverlay=!1,this.toasterService.show(!1,\"Item not found.\");let e=t.data;(()=>{Object(r.a)(this,void 0,void 0,(function*(){try{if(1==e.imported){let t={contractid:e.contractId};this.publishData.imported=1,this.publishData.contractId=e.contractId,yield this.service.postRequest(\"users/getContract\",t).subscribe(t=>{if(t.status){let i=t.data;this.apprToken=i.contract,this.apprTokenABI=i.abi,this.contractPrivate(this.apprToken,this.apprTokenABI,e)}})}else{if(this.publishData.imported=0,this.publishData.contractId=\"\",!this.service.metaDeatails.account)return this.service.isOverlay=!1,this.toasterService.show(!1,\"Please connect metamask\");let t=e.currency;this.apprToken=l.a[0][t].address,this.apprTokenId=l.a[0][t].tokenid,\"ERC721\"==t?this.apprTokenABI=n.a:\"WBNB\"==t?this.apprTokenABI=c.a:\"ERC20\"==t&&(this.apprTokenABI=o.a),this.contractPrivate(this.apprToken,this.apprTokenABI,e)}}catch(t){this.service.isOverlay=!1,this.toasterService.show(!1,t.message)}}))})()})})}fixedSale(t){t&&this.service.postRequest(\"collection/getItem\",{id:t}).subscribe(t=>{if(!t.status)return this.service.isOverlay=!1,this.toasterService.show(!1,\"Item not found.\");let e=t.data;(()=>{Object(r.a)(this,void 0,void 0,(function*(){try{if(!this.service.metaDeatails.account)return this.service.isOverlay=!1,this.toasterService.show(!1,\"Please connect metamask\");if(1==e.imported){let t={contractid:e.contractId};this.publishData.imported=1,this.publishData.contractId=e.contractId,yield this.service.postRequest(\"users/getContract\",t).subscribe(t=>{if(t.status){let i=t.data;this.apprToken=i.contract,this.apprTokenABI=i.abi,this.contractFixed(this.apprToken,this.apprTokenABI,e)}})}else{this.publishData.imported=0,this.publishData.contractId=\"\";let t=e.currency;this.apprToken=l.a[0][t].address,this.apprTokenId=l.a[0][t].tokenid,\"ERC721\"==t?this.apprTokenABI=n.a:\"WBNB\"==t?this.apprTokenABI=c.a:\"ERC20\"==t&&(this.apprTokenABI=o.a),this.contractFixed(this.apprToken,this.apprTokenABI,e)}}catch(t){this.service.isOverlay=!1,this.toasterService.show(!1,t.message)}}))})()})}auctionSale(t){t&&this.service.postRequest(\"collection/getItem\",{id:t}).subscribe(t=>{if(!t.status)return this.service.isOverlay=!1,this.toasterService.show(!1,\"Item not found.\");let e=t.data;(()=>{Object(r.a)(this,void 0,void 0,(function*(){try{if(!this.service.metaDeatails.account)return this.service.isOverlay=!1,this.toasterService.show(!1,\"Please connect metamask\");if(1==e.imported){let t={contractid:e.contractId};this.publishData.imported=1,this.publishData.contractId=e.contractId,yield this.service.postRequest(\"users/getContract\",t).subscribe(t=>{if(t.status){let i=t.data;this.apprToken=i.contract,this.apprTokenABI=i.abi,this.contractAuction(this.apprToken,this.apprTokenABI,e)}})}else{this.publishData.imported=0,this.publishData.contractId=\"\";let t=e.currency;this.apprToken=l.a[0][t].address,this.apprTokenId=l.a[0][t].tokenid,\"ERC721\"==t?this.apprTokenABI=n.a:\"WBNB\"==t?this.apprTokenABI=c.a:\"ERC20\"==t&&(this.apprTokenABI=o.a),this.contractAuction(this.apprToken,this.apprTokenABI,e)}}catch(t){this.service.isOverlay=!1,this.toasterService.show(!1,t.message)}}))})()})}contractFixed(t,e,i){return Object(r.a)(this,void 0,void 0,(function*(){try{let s=JSON.parse(e),a=this.service.metaDeatails.account;if((yield this.nftService.approveSellFun(t,s,i.selltokenid,a)).result){window.web3=window.web3.currentProvider,window.web3=new window.Web3(window.ethereum),yield this.nftService.getweiValue(i.price);let e=new Date,s=Math.floor(Math.random()*(new Date).getTime()),r=[[a,[t,i.selltokenid,\"1\"],[\"0xae13d989dac2f0debff460ac112a837c89baa7cd\",(1e18*i.price).toString(),\"0\"]],i.spid.toString(),(1e18*i.price).toString(),\"40\",s.toString(),e.getTime().toString(),\"2\"],n=yield this.nftService.orderHash(r),c=yield window.web3.eth.personal.sign(n.result,a,\"\"),o=c.slice(0,66),l=\"0x\"+c.slice(66,130),b=[\"0x\"+c.slice(130,132),o,l];return void(n&&b?(this.publishData.sellorder={order:r,vrs:b},this.service.postRequest(\"collection/fixedsale\",this.publishData).subscribe(t=>{t.status?(this.toasterService.show(t.status,t.msg),this.route.navigateByUrl(\"/market\")):this.toasterService.show(t.status,t.msg)})):(this.service.isOverlay=!1,this.toasterService.show(!1,\"Unable to sell, please try again\")))}return this.service.isOverlay=!1,this.toasterService.show(!1,\"Something went wrong, Please Try Again.\"),void this.route.navigateByUrl(\"/market\")}catch(s){this.toasterService.show(!1,s),this.route.navigateByUrl(\"/market\")}}))}contractAuction(t,e,i){return Object(r.a)(this,void 0,void 0,(function*(){try{let s=JSON.parse(e),a=this.service.metaDeatails.account;if((yield this.nftService.approveSellFun(t,s,i.selltokenid,a)).result){window.web3=window.web3.currentProvider,window.web3=new window.Web3(window.ethereum),yield this.nftService.getweiValue(i.price);let e=new Date,s=Math.floor(Math.random()*(new Date).getTime()),r=[[a,[t,i.selltokenid,\"1\"],[\"0xae13d989dac2f0debff460ac112a837c89baa7cd\",(1e18*i.price).toString(),\"0\"]],i.spid.toString(),(1e18*i.price).toString(),\"40\",s.toString(),e.getTime().toString(),\"3\"],n=yield this.nftService.orderHash(r),c=yield window.web3.eth.personal.sign(n.result,a,\"\"),o=c.slice(0,66),l=\"0x\"+c.slice(66,130),b=[\"0x\"+c.slice(130,132),o,l];return void(n&&b?(this.publishData.sellorder={order:r,vrs:b},this.service.postRequest(\"collection/privatesale\",this.publishData).subscribe(t=>{t.status?(this.toasterService.show(t.status,t.msg),this.route.navigateByUrl(\"market\")):this.toasterService.show(t.status,t.msg)})):this.toasterService.show(!1,\"Unable to sell, please try again\"))}return this.toasterService.show(!1,\"Something went wrong, Please Try Again.\"),void this.route.navigateByUrl(\"/market\")}catch(s){}}))}contractPrivate(t,e,i){return Object(r.a)(this,void 0,void 0,(function*(){try{let s=JSON.parse(e),a=this.service.metaDeatails.account;if((yield this.nftService.approveSellFun(t,s,i.selltokenid,a)).result){window.web3=window.web3.currentProvider,window.web3=new window.Web3(window.ethereum),yield this.nftService.getweiValue(i.price);let e=new Date,s=Math.floor(Math.random()*(new Date).getTime()),r=[[a,[t,i.selltokenid,\"1\"],[\"0xae13d989dac2f0debff460ac112a837c89baa7cd\",(1e18*i.price).toString(),\"0\"]],i.spid.toString(),(1e18*i.price).toString(),\"40\",s.toString(),e.getTime().toString(),\"1\"],n=yield this.nftService.orderHash(r),c=yield window.web3.eth.personal.sign(n.result,a,\"\"),o=c.slice(0,66),l=\"0x\"+c.slice(66,130),b=[\"0x\"+c.slice(130,132),o,l];return void(n&&b?(this.publishData.sellorder={order:r,vrs:b},this.service.postRequest(\"collection/privatesale\",this.publishData).subscribe(t=>{t.status?(this.toasterService.show(t.status,t.msg),this.route.navigateByUrl(\"market\")):this.toasterService.show(t.status,t.msg)})):this.toasterService.show(!1,\"Unable to sell, please try again\"))}return this.toasterService.show(!1,\"Something went wrong, Please Try Again.\"),void this.route.navigateByUrl(\"/market\")}catch(s){}}))}}return t.\\u0275fac=function(e){return new(e||t)(b.Rb(a.a),b.Rb(a.b),b.Rb(d.a),b.Rb(h.a),b.Rb(u.a),b.Rb(p.a))},t.\\u0275cmp=b.Lb({type:t,selectors:[[\"app-user\"]],decls:32,vars:13,consts:[[1,\"row\"],[1,\"col-lg-12\",\"mb-5\"],[1,\"section-title\",\"text-center\"],[1,\"col-12\",\"user-profile-cnt\"],[1,\"cover-cnt\"],[1,\"profile-cnt\",\"d-flex\",\"justify-content-center\"],[1,\"profile-pic-cnt\"],[3,\"src\"],[1,\"edit\",\"cursor\",3,\"routerLink\"],[1,\"fa\",\"fa-pencil\"],[1,\"copy-link\"],[1,\"col-12\",\"user-cnt\"],[\"id\",\"tab1\"],[\"tabHeading\",\"\"],[\"class\",\"row\",4,\"ngIf\"],[\"id\",\"tab2\"],[\"id\",\"tab3\"],[\"Createcollection\",\"\"],[\"class\",\"col-md-12 col-lg-6 col-sm-12 col-xl-4\",4,\"ngFor\",\"ngForOf\"],[1,\"col-md-12\",\"col-lg-6\",\"col-sm-12\",\"col-xl-4\"],[1,\"act-cnt\"],[1,\"act-head\",\"d-flex\",\"align-items-center\",\"justify-content-between\",\"px-2\",\"mb-3\"],[1,\"d-flex\"],[1,\"prof-pic-cnt\",\"mr-3\"],[3,\"src\",4,\"ngIf\"],[\"src\",\"assets/images/prof.png\",4,\"ngIf\"],[1,\"mb-0\"],[1,\"mr-3\"],[1,\"prof-pic-cnt\"],[\"src\",\"assets/images/prof1.png\",4,\"ngIf\"],[4,\"ngIf\"],[1,\"act-head\"],[1,\"border-bottom\"],[1,\"row\",\"mt-2\"],[1,\"col-sm-6\",\"col-md-6\",\"col-lg-6\",\"text-center\",\"col-xl-6\",\"border-right\"],[1,\"mb-2\"],[1,\"col-sm-6\",\"col-md-6\",\"text-center\",\"col-lg-6\",\"col-xl-6\"],[1,\"btn\",\"default-btn\",\"type-btn\",3,\"click\"],[\"src\",\"assets/images/prof.png\"],[\"src\",\"assets/images/prof1.png\"],[1,\"cursor\",3,\"click\"],[\"class\",\"img-fluid w-100\",3,\"src\",4,\"ngIf\"],[\"src\",\"assets/images/market1.png\",\"class\",\"img-fluid w-100\",4,\"ngIf\"],[1,\"img-fluid\",\"w-100\",3,\"src\"],[\"src\",\"assets/images/market1.png\",1,\"img-fluid\",\"w-100\"],[\"src\",\"assets/images/heart.png\",1,\"heart-icon\"],[\"id\",\"Bidapp\",1,\"modalPrimary\",\"md\",\"creat-collection\"],[1,\"modal-dialog\",\"modal-lg\",\"modal-dialog-centered\"],[1,\"modal-content\"],[1,\"modal-header\",\"border-bottom-0\",\"d-block\"],[\"type\",\"button\",\"data-dismiss\",\"modal\",1,\"close\",3,\"click\"],[1,\"modal-title\",\"section-title\",\"mb-0\",\"w-100\",\"text-center\"],[1,\"modal-body\"],[3,\"ngSubmit\"],[\"f1\",\"ngForm\"],[1,\"row\",\"justify-content-center\",\"align-items-start\"],[1,\"col-md-12\",\"col-sm-12\",\"col-lg-12\",\"col-xl-12\"],[1,\"blog-sec-cnt\"],[1,\"form-group\",\"mt-3\"],[\"for\",\"saletype1\",1,\"pb-0\",\"font-16\",\"text-black\",\"fontweight-400\",\"mb-2\"],[1,\"text-danger\"],[\"name\",\"saletype1\",\"required\",\"\",1,\"form-control\",3,\"change\"],[\"saletype1\",\"\"],[\"value\",\"fixed\"],[\"value\",\"private\"],[\"value\",\"auction\"],[\"class\",\"invalid-feedback\",4,\"ngIf\"],[\"class\",\"form-group mt-3 \",4,\"ngIf\"],[\"class\",\"pb-0 font-16 text-black fontweight-400 mb-2\",\"for\",\"yourName\",4,\"ngIf\"],[\"type\",\"text\",\"placeholder\",\"Price\",\"name\",\"price\",\"required\",\"\",1,\"form-control\",\"input-sec\",\"font-16\",\"fontweight-400\",3,\"ngClass\",\"ngModel\",\"ngModelChange\"],[\"price\",\"ngModel\"],[1,\"text-center\"],[\"class\",\"btn fontweight-500 default-btn mt-4\",4,\"ngIf\"],[\"class\",\"btn default-btn mt-4\",4,\"ngIf\"],[1,\"invalid-feedback\"],[\"for\",\"address\",1,\"pb-0\",\"font-16\",\"text-black\",\"fontweight-400\",\"mb-2\"],[\"type\",\"text\",\"placeholder\",\"Address\",\"name\",\"address\",\"required\",\"\",1,\"form-control\",\"input-sec\",\"font-16\",\"fontweight-400\",3,\"ngClass\",\"ngModel\",\"ngModelChange\"],[\"address\",\"ngModel\"],[\"for\",\"yourName\",1,\"pb-0\",\"font-16\",\"text-black\",\"fontweight-400\",\"mb-2\"],[1,\"btn\",\"fontweight-500\",\"default-btn\",\"mt-4\"],[1,\"btn\",\"default-btn\",\"mt-4\"]],template:function(t,e){1&t&&(b.Xb(0,\"div\",0),b.Xb(1,\"div\",1),b.Xb(2,\"h3\",2),b.Ic(3,\"Profile\"),b.Wb(),b.Wb(),b.Xb(4,\"div\",3),b.Sb(5,\"div\",4),b.Xb(6,\"div\",5),b.Xb(7,\"div\",6),b.Sb(8,\"img\",7),b.Xb(9,\"div\",8),b.Sb(10,\"i\",9),b.Wb(),b.Wb(),b.Wb(),b.Xb(11,\"h3\"),b.Ic(12),b.Wb(),b.Xb(13,\"p\"),b.Xb(14,\"span\",10),b.Ic(15),b.Wb(),b.Wb(),b.Wb(),b.Xb(16,\"div\",11),b.Xb(17,\"tabset\"),b.Xb(18,\"tab\",12),b.Gc(19,f,1,0,\"ng-template\",13),b.Gc(20,F,2,1,\"div\",14),b.Gc(21,x,2,0,\"div\",14),b.Wb(),b.Xb(22,\"tab\",15),b.Gc(23,B,1,0,\"ng-template\",13),b.Gc(24,q,2,1,\"div\",14),b.Gc(25,C,2,0,\"div\",14),b.Wb(),b.Xb(26,\"tab\",16),b.Gc(27,P,1,0,\"ng-template\",13),b.Gc(28,j,2,1,\"div\",14),b.Gc(29,J,2,0,\"div\",14),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Gc(30,et,41,11,\"ng-template\",null,17,b.Hc)),2&t&&(b.Fb(5),b.Ec(\"background:url('\",e.profile.profilepicture?e.profile.profilepicture:\"assets/images/mkt-prof7.png\",\"');\"),b.Fb(3),b.oc(\"src\",e.profile.profilepicture?e.profile.profilepicture:\"assets/images/mkt-prof7.png\",b.Bc),b.Fb(1),b.nc(\"routerLink\",\"/edit-profile\"),b.Fb(3),b.Jc(e.profile.username?e.profile.username:\"Unnamed\"),b.Fb(3),b.Jc(e.profile.address?e.profile.address:\"0xd3a0...6833\"),b.Fb(5),b.nc(\"ngIf\",e.owned.length),b.Fb(1),b.nc(\"ngIf\",!e.owned.length),b.Fb(3),b.nc(\"ngIf\",e.created.length),b.Fb(1),b.nc(\"ngIf\",!e.created.length),b.Fb(3),b.nc(\"ngIf\",e.favorites.length),b.Fb(1),b.nc(\"ngIf\",!e.favorites.length))},directives:[a.c,m.d,m.a,m.b,s.m,s.l,g.u,g.j,g.k,g.m,g.t,g.b,g.q,s.k,g.i,g.l],styles:[\"\"]}),t})();var st=i(\"Mfq2\"),at=i(\"1doH\"),rt=i(\"hzby\"),nt=i(\"kUHs\");const ct=[{path:\"\",component:it}];let ot=(()=>{class t{}return t.\\u0275mod=b.Pb({type:t}),t.\\u0275inj=b.Ob({factory:function(e){return new(e||t)},imports:[[s.c,g.f,g.p,a.e.forChild(ct),at.a,st.b.forRoot(),u.c.forRoot(),m.c.forRoot(),rt.c.forRoot(),nt.b.forRoot()]]}),t})()}}]);","extractedComments":[]}