{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{\"1doH\":function(e,t,i){\"use strict\";i.d(t,\"a\",(function(){return s}));var o=i(\"ofXK\"),n=i(\"fXoL\");let s=(()=>{class e{}return e.\\u0275mod=n.Pb({type:e}),e.\\u0275inj=n.Ob({factory:function(t){return new(t||e)},imports:[[o.c]]}),e})()},Vi7i:function(e,t,i){\"use strict\";i.r(t),i.d(t,\"ReferralModule\",(function(){return y}));var o=i(\"ofXK\"),n=i(\"tyNb\"),s=i(\"fXoL\"),r=i(\"3Pt+\");let a=(()=>{class e{static forRoot(){return{ngModule:e,providers:[]}}}return e.\\u0275mod=s.Pb({type:e}),e.\\u0275inj=s.Ob({factory:function(t){return new(t||e)},imports:[[o.c]]}),e})();var c=i(\"mrSG\"),d=i(\"c9Rp\"),b=i(\"s1dW\"),l=i(\"iGYC\"),f=i(\"EKte\"),u=i(\"3bqL\");let m=(()=>{class e{constructor(e){this.dataService=e}GetReferalInfo(){return Object(c.a)(this,void 0,void 0,(function*(){let e=f.a,t=this.dataService.metaDeatails.account;return new Promise((i,o)=>Object(c.a)(this,void 0,void 0,(function*(){if(void 0!==window.web3){let o=new window.web3.eth.Contract(e,u.a.master_stake_address);yield o.methods.refInfo(t).call((e,t)=>Object(c.a)(this,void 0,void 0,(function*(){i(t?{status:!0,message:\"Get your balance\",info:t}:{status:!1,message:\"Got error\",data:e})})))}else i({status:!1,message:\"Metamask extension not added on your browser\"})})))}))}AddReferal(e){return Object(c.a)(this,void 0,void 0,(function*(){let t=u.a.master_stake_address,i=f.a;return new Promise((o,n)=>Object(c.a)(this,void 0,void 0,(function*(){if(void 0!==window.web3){let n=this.dataService.metaDeatails.account,s=new window.web3.eth.Contract(i,t);yield s.methods.register(e).send({from:n}).on(\"transactionHash\",e=>{}).on(\"receipt\",e=>Object(c.a)(this,void 0,void 0,(function*(){console.log(e,\"result\"),o({status:!0,message:\"Successfully Referrals\",tx_id:e.transactionHash})}))).on(\"confirmation\",(e,t)=>{}).on(\"error\",e=>Object(c.a)(this,void 0,void 0,(function*(){const t={status:!1,message:e.message};yield o(t)})))}else o({status:!1,message:\"Metamask extension not added on your browser\"})})))}))}}return e.\\u0275fac=function(t){return new(t||e)(s.bc(b.a))},e.\\u0275prov=s.Nb({token:e,factory:e.\\u0275fac,providedIn:\"root\"}),e})();var v=i(\"vqsv\");let h=(()=>{class e{constructor(e,t,i,o,n){this.commonContractService=e,this.dataService=t,this.metamaskService=i,this.referalService=o,this.toasterService=n,this.isRefAddressValid=!1,this.formSubmited=!1,this.isShowReferalButton=!1,this.amountDigits=\"1.4-4\",this.refObj={refCount:\"\",reward:\"\"},this.metaCallCommonFunction()}ngOnInit(){this.setRefLink(),this.getReferalInfo()}metaCallCommonFunction(){this.dataService.isMetaReady.subscribe(e=>{e&&(this.setRefLink(),this.getReferalInfo())}),this.dataService.metaDeatails.isMetaLogin&&(this.setRefLink(),this.getReferalInfo())}setRefLink(){this.refLink=`${window.location.origin}/refby/${this.dataService.metaDeatails.account}`}getReferalInfo(){return Object(c.a)(this,void 0,void 0,(function*(){this.referalService.GetReferalInfo().then(e=>Object(c.a)(this,void 0,void 0,(function*(){console.log(e,\"suceees \"),e.status?(this.refObj.refCount=e.info.refCount,this.refObj.reward=yield window.web3.utils.fromWei(e.info.reward.toString(),\"ether\")):(this.refObj.refCount=0,this.refObj.reward=0)})))}))}copyReferal(){if(this.dataService.metaDeatails.isMetaLogin){let e=this.refLink,t=document.createElement(\"textarea\");t.style.position=\"fixed\",t.style.left=\"0\",t.style.top=\"0\",t.style.opacity=\"0\",t.value=e,document.body.appendChild(t),t.focus(),t.select(),document.execCommand(\"copy\"),document.body.removeChild(t),this.toasterService.show(!0,\"Referal Link Copied !\")}else this.dataService.showWalletList.emit(!0)}}return e.\\u0275fac=function(t){return new(t||e)(s.Rb(d.a),s.Rb(b.a),s.Rb(l.a),s.Rb(m),s.Rb(v.a))},e.\\u0275cmp=s.Lb({type:e,selectors:[[\"app-reference-links\"]],decls:35,vars:6,consts:[[1,\"tabpages-cnt\"],[1,\"section-title\",\"mb-5\"],[1,\"row\"],[1,\"col-lg-6\"],[1,\"card\",\"shadow-card\"],[1,\"card-body\"],[1,\"d-flex\",\"justify-content-sm-between\",\"align-items-center\",\"mb-4\"],[\"src\",\"assets/images/referal-link-icon.png\",1,\"img-fluid\"],[1,\"purple-txt\",\"text-center\"],[\"src\",\"assets/images/referral-commission-icon.png\",1,\"img-fluid\"],[1,\"col-lg-12\"],[\"type\",\"button\",1,\"btn\",\"default-btn\",3,\"click\"],[\"type\",\"text\",\"readonly\",\"\",3,\"value\"]],template:function(e,t){1&e&&(s.Xb(0,\"div\",0),s.Xb(1,\"h3\",1),s.Ic(2,\"Reference Links\"),s.Wb(),s.Xb(3,\"div\",2),s.Xb(4,\"div\",3),s.Xb(5,\"div\",4),s.Xb(6,\"div\",5),s.Xb(7,\"div\",6),s.Xb(8,\"p\"),s.Ic(9,\"Total Referrals\"),s.Wb(),s.Xb(10,\"div\"),s.Sb(11,\"img\",7),s.Wb(),s.Wb(),s.Xb(12,\"h3\",8),s.Ic(13),s.Wb(),s.Wb(),s.Wb(),s.Wb(),s.Xb(14,\"div\",3),s.Xb(15,\"div\",4),s.Xb(16,\"div\",5),s.Xb(17,\"div\",6),s.Xb(18,\"p\"),s.Ic(19,\"Total Referral Commissions\"),s.Wb(),s.Xb(20,\"div\"),s.Sb(21,\"img\",9),s.Wb(),s.Wb(),s.Xb(22,\"h3\",8),s.Ic(23),s.hc(24,\"number\"),s.Wb(),s.Wb(),s.Wb(),s.Wb(),s.Xb(25,\"div\",10),s.Xb(26,\"div\",4),s.Xb(27,\"div\",5),s.Xb(28,\"div\",6),s.Xb(29,\"p\"),s.Ic(30,\"Your Referral Link\"),s.Wb(),s.Xb(31,\"div\"),s.Xb(32,\"button\",11),s.ec(\"click\",(function(){return t.copyReferal()})),s.Ic(33,\"Copy\"),s.Wb(),s.Wb(),s.Wb(),s.Sb(34,\"input\",12),s.Wb(),s.Wb(),s.Wb(),s.Wb(),s.Wb()),2&e&&(s.Fb(13),s.Jc(null==t.refObj?null:t.refObj.refCount),s.Fb(10),s.Jc(s.jc(24,3,null==t.refObj?null:t.refObj.reward,t.amountDigits)),s.Fb(11),s.oc(\"value\",t.refLink))},pipes:[o.f],styles:[\"\"]}),e})();var p=i(\"1doH\");const w=[{path:\"\",component:h}];let y=(()=>{class e{}return e.\\u0275mod=s.Pb({type:e}),e.\\u0275inj=s.Ob({factory:function(t){return new(t||e)},imports:[[o.c,r.f,p.a,n.e.forChild(w),a.forRoot()]]}),e})()}}]);","extractedComments":[]}