{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{sOro:function(t,e,a){\"use strict\";a.d(e,\"a\",(function(){return r}));var i=a(\"ofXK\"),n=a(\"tyNb\"),s=a(\"3Pt+\"),o=a(\"fXoL\");let r=(()=>{class t{}return t.\\u0275mod=o.Pb({type:t}),t.\\u0275inj=o.Ob({factory:function(e){return new(e||t)},imports:[[i.c,s.f,n.e]]}),t})()},\"v+Pn\":function(t,e,a){\"use strict\";a.d(e,\"a\",(function(){return m}));var i=a(\"mrSG\"),n=a(\"fXoL\"),s=a(\"s1dW\"),o=a(\"752y\"),r=a(\"iGYC\"),c=a(\"c9Rp\"),d=a(\"vqsv\"),l=a(\"3Pt+\"),u=a(\"ofXK\");function b(t,e){if(1&t&&(n.Xb(0,\"small\",29),n.Ic(1),n.hc(2,\"number\"),n.Wb()),2&t){const t=n.gc();n.Fb(1),n.Kc(\" Enter Within Staked Amount : \",t.stakingPair.avilableStakeAmount?t.stakingPair.avilableStakeAmount:n.jc(2,1,0,t.dataService.fixNumber),\" \")}}function h(t,e){if(1&t&&(n.Xb(0,\"small\",29),n.Ic(1),n.hc(2,\"number\"),n.Wb()),2&t){const t=n.gc();n.Fb(1),n.Kc(\" Enter Within Staked Amount : \",t.stakingPair.staked_amount?t.stakingPair.staked_amount:n.jc(2,1,0,t.dataService.fixNumber),\" \")}}let m=(()=>{class t{constructor(t,e,a,i,s,o){this.dataService=t,this.stakeService=e,this.metamaskService=a,this.commonContractService=i,this.toasterService=s,this.changeDetectorRef=o,this.stakingPair={},this.goBack=new n.q,this.isUnstakeAvailable=!1,this.isClaimAvailable=!1,this.isStakeAvailable=!1,this.istoUnstakeAmountValid=!0,this.isTostakeAmountValid=!0,this.metaCallCommonFunction(),this.dataService.accountsChanged.subscribe(t=>{this.cancel()})}ngOnInit(){this.getPolledPairs()}getReferrerReward(t){this.stakeService.GetReferrerReward(t).then(t=>{console.log(t,\"_________ suc\")})}cancel(){this.goBack.emit(!0)}metaCallCommonFunction(){}getPolledPairs(){return Object(i.a)(this,void 0,void 0,(function*(){console.log(this.stakingPair,\"stakingPair\"),yield this.setPairBalance(this.stakingPair.pair_address).then(t=>{this.stakingPair.avilableStakeAmount=t.balance,this.stakingPair.avilableStakeAmountRaw=t.rawbalance,this.stakingPair.toStakeAmount=this.stakingPair.avilableStakeAmount,console.log(t.balance,\"suc.balance\"),this.isStakeAvailable=+t.balance>0}),yield this.getRewardAmount(this.stakingPair.poolId).then(t=>{console.log(t,\"___________ suc\"),this.stakingPair.reward_amount=t,this.isClaimAvailable=+t>0}),yield this.getStakedAmount().then(t=>{this.stakingPair.staked_amount=t.amount,this.stakingPair.staked_amountRaw=t.amountRaw,this.stakingPair.toUnstakeAmount=t.amount,this.isUnstakeAvailable=+t.amount>0}),setTimeout(()=>{this.changeDetectorRef.detectChanges()})}))}checkValidAmount(t){\"stake\"==t?this.isTostakeAmountValid=!(this.stakingPair.avilableStakeAmount<this.stakingPair.toStakeAmount):this.istoUnstakeAmountValid=!(this.stakingPair.staked_amount<this.stakingPair.toUnstakeAmount)}setPairBalance(t){return this.commonContractService.GetTokenbalance(t).then(t=>t.status?t:0)}getRewardAmount(t){return Object(i.a)(this,void 0,void 0,(function*(){return this.stakeService.GetRewardamount(t).then(t=>Object(i.a)(this,void 0,void 0,(function*(){return t.status?yield window.web3.utils.fromWei(t.result.toString(),\"ether\"):0}))).catch(t=>{console.log(\"reward false\")})}))}getStakedAmount(){return Object(i.a)(this,void 0,void 0,(function*(){return this.stakeService.GetStakedamount(this.stakingPair.poolId).then(t=>Object(i.a)(this,void 0,void 0,(function*(){if(t.status){let e=yield window.web3.utils.fromWei(t.amount.toString(),\"ether\");return{amountRaw:t.amount,amount:e}}return 0}))).catch(t=>{console.log(\"reward false\")})}))}stake(t){return Object(i.a)(this,void 0,void 0,(function*(){yield this.metamaskService.checkChainIdCall(),this.stakeApprove(t)}))}stakeApprove(t){return Object(i.a)(this,void 0,void 0,(function*(){let e=yield window.web3.utils.toWei(this.stakingPair.toStakeAmount.toString(),\"ether\");this.dataService.isOverlay=!0,this.dataService.changeDetector.emit(!0),this.stakeService.ApproveFunction(t.pair_address,e.toString()).then(a=>{a.status?this.stakeService.StakeFunction(t.poolId.toString(),e.toString()).then(e=>Object(i.a)(this,void 0,void 0,(function*(){console.log(e,\"-------- result\"),e.status?(this.stakeApiCall({userAddress:this.dataService.metaDeatails.account,poolId:t.poolId,pairAddress:t.pair_address,rewardAddress:t.rewardedaddress,txId:e.result.transactionHash,status:\"Completed\",amount:t.toStakeAmount},\"deposit/createDeposit\"),this.toasterService.show(!0,\"Staked Successfully\")):(this.dataService.isOverlay=!1,this.dataService.changeDetector.emit(!0))}))).catch(t=>{this.dataService.isOverlay=!1,this.dataService.changeDetector.emit(!0)}):(this.dataService.isOverlay=!1,this.dataService.changeDetector.emit(!0),this.toasterService.show(!1,a.message))}).catch(t=>{this.dataService.isOverlay=!1,this.dataService.changeDetector.emit(!0),this.toasterService.show(!1,t.error)})}))}unstake(t){return Object(i.a)(this,void 0,void 0,(function*(){this.dataService.isOverlay=!0,this.dataService.changeDetector.emit(!0);let e=yield window.web3.utils.toWei(this.stakingPair.toUnstakeAmount.toString(),\"ether\");this.stakeService.UnstakeFunction(t.poolId,e).then(e=>Object(i.a)(this,void 0,void 0,(function*(){console.log(e,\"-------- result\"),e.status?(console.log(\"result ----------\\x3e\",e),this.stakeApiCall({userAddress:this.dataService.metaDeatails.account,poolId:t.poolId,pairAddress:t.pair_address,txId:e.result.transactionHash,status:\"Completed\",amount:t.toUnstakeAmount},\"withdraw/createwithdraw\"),this.stakeApiCall({userAddress:this.dataService.metaDeatails.account,poolId:t.poolId,pairAddress:t.pair_address,txId:e.result.transactionHash,status:\"Completed\",amount:t.reward_amount,pair:t.pair},\"harvest/createHarvest\"),this.toasterService.show(!0,\"Unstaked Successfully\")):(this.dataService.isOverlay=!1,this.dataService.changeDetector.emit(!0))}))).catch(t=>{this.dataService.isOverlay=!1,this.dataService.changeDetector.emit(!0)})}))}calimeReward(t){this.dataService.isOverlay=!0,this.dataService.changeDetector.emit(!0),this.stakeService.HarvestFunction(t.poolId).then(e=>Object(i.a)(this,void 0,void 0,(function*(){console.log(e,\"-------- result\"),e.status?(this.stakeApiCall({userAddress:this.dataService.metaDeatails.account,poolId:t.poolId,pairAddress:t.pair_address,txId:e.result.transactionHash,status:\"Completed\",amount:t.reward_amount,pair:t.pair},\"harvest/createHarvest\"),this.toasterService.show(!0,\"Claimed Successfully\")):(this.dataService.isOverlay=!1,this.dataService.changeDetector.emit(!0))}))).catch(t=>{console.log(\"______________\",\"yes\"),this.dataService.isOverlay=!1,this.dataService.changeDetector.emit(!0)})}stakeApiCall(t,e){this.dataService.postRequest(e,t).subscribe(t=>{t.status&&(this.getPolledPairs(),this.commonContractService.getGovernanceTokenBalance(),this.dataService.isOverlay=!1,this.dataService.changeDetector.emit(!0))})}}return t.\\u0275fac=function(e){return new(e||t)(n.Rb(s.a),n.Rb(o.a),n.Rb(r.a),n.Rb(c.a),n.Rb(d.a),n.Rb(n.i))},t.\\u0275cmp=n.Lb({type:t,selectors:[[\"app-staking2\"]],inputs:{stakingPair:\"stakingPair\"},outputs:{goBack:\"goBack\"},decls:60,vars:21,consts:[[1,\"row\"],[1,\"col-xl-8\",\"col-lg-12\",\"col-md-12\",\"col-12\"],[1,\"card\",\"cardborder\",\"stakingbox\",\"stackingboxinner\"],[1,\"card-body\"],[1,\"d-flex\",\"align-items-center\",\"justify-content-between\"],[1,\"mr-2\"],[\"type\",\"button\",1,\"text-decoration-none\",\"acircleLink\",3,\"click\"],[\"src\",\"assets/images/right-arrow.png\",2,\"transform\",\"rotate(180deg)\"],[1,\"stackboxTit\"],[1,\"d-flex\",\"align-items-center\",\"farmboxTit\",\"mb-4\"],[1,\"\"],[1,\"ml-auto\",\"text-primary\"],[\"name\",\"toStakeAmount\",\"placeholder\",\"0.0\",\"type\",\"number\",1,\"form-control\",3,\"ngModel\",\"disabled\",\"paste\",\"ngModelChange\",\"keyup\"],[\"class\",\"err-msg\",4,\"ngIf\"],[\"name\",\"toUnstakeAmount\",\"placeholder\",\"0.0\",\"type\",\"number\",1,\"form-control\",3,\"ngModel\",\"disabled\",\"paste\",\"ngModelChange\",\"keyup\"],[1,\"d-flex\",\"farmboxTit\",\"mb-4\"],[1,\"text-center\",\"mb-2\"],[1,\"fs-12\"],[1,\"text-center\"],[\"type\",\"button\",1,\"btn\",\"default-btn\",\"btn-block\",3,\"disabled\",\"click\"],[1,\"col-xl-4\",\"col-lg-12\",\"col-md-12\",\"col-12\"],[1,\"card\",\"mycard\",\"graybgcard\",\"stakingbox\",\"stackingboxinner\"],[1,\"card-body\",\"p-2\"],[1,\"d-flex\",\"justify-content-center\",\"flex-column\",\"text-left\"],[1,\"farmsboxTxt\"],[1,\"farmboxTit\",\"rightsideVal\"],[1,\"farmboxTit\"],[1,\"farmsboxTxt\",\"mt-1\"],[1,\"farmboxTit\",\"fs-18\",\"mb-2\"],[1,\"err-msg\"]],template:function(t,e){1&t&&(n.Xb(0,\"div\",0),n.Xb(1,\"div\",1),n.Xb(2,\"div\",2),n.Xb(3,\"div\",3),n.Xb(4,\"div\",4),n.Xb(5,\"div\",5),n.Xb(6,\"button\",6),n.ec(\"click\",(function(){return e.cancel()})),n.Sb(7,\"img\",7),n.Wb(),n.Wb(),n.Xb(8,\"div\"),n.Xb(9,\"div\",8),n.Ic(10,\"STAKE & FARM\"),n.Wb(),n.Wb(),n.Wb(),n.Xb(11,\"div\",9),n.Xb(12,\"div\",10),n.Ic(13,\"Total Staked (LP Tokens)\"),n.Wb(),n.Xb(14,\"div\",11),n.Xb(15,\"div\",10),n.Xb(16,\"input\",12),n.ec(\"paste\",(function(t){return t.preventDefault()}))(\"ngModelChange\",(function(t){return e.stakingPair.toStakeAmount=t}))(\"keyup\",(function(){return e.checkValidAmount(\"stake\")})),n.Wb(),n.Wb(),n.Gc(17,b,3,4,\"small\",13),n.Wb(),n.Wb(),n.Xb(18,\"div\",9),n.Xb(19,\"div\",10),n.Ic(20,\"Total Withdraw (LP Tokens)\"),n.Wb(),n.Xb(21,\"div\",11),n.Xb(22,\"div\",10),n.Xb(23,\"input\",14),n.ec(\"paste\",(function(t){return t.preventDefault()}))(\"ngModelChange\",(function(t){return e.stakingPair.toUnstakeAmount=t}))(\"keyup\",(function(){return e.checkValidAmount(\"unstake\")})),n.Wb(),n.Wb(),n.Gc(24,h,3,4,\"small\",13),n.Wb(),n.Wb(),n.Xb(25,\"div\",15),n.Xb(26,\"div\",10),n.Ic(27),n.Wb(),n.Xb(28,\"div\",11),n.Ic(29),n.hc(30,\"number\"),n.Wb(),n.Wb(),n.Xb(31,\"div\",16),n.Xb(32,\"div\",17),n.Ic(33),n.Wb(),n.Wb(),n.Xb(34,\"div\",18),n.Xb(35,\"button\",19),n.ec(\"click\",(function(){return e.stake(e.stakingPair)})),n.Ic(36,\"Stake\"),n.Wb(),n.Xb(37,\"button\",19),n.ec(\"click\",(function(){return e.unstake(e.stakingPair)})),n.Ic(38,\"Withdraw & Claim\"),n.Wb(),n.Xb(39,\"button\",19),n.ec(\"click\",(function(){return e.calimeReward(e.stakingPair)})),n.Ic(40,\"Claim\"),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Xb(41,\"div\",20),n.Xb(42,\"div\",21),n.Xb(43,\"div\",22),n.Xb(44,\"div\",23),n.Xb(45,\"div\"),n.Xb(46,\"div\",24),n.Ic(47,\" Available to Stake (LP Tokens) \"),n.Wb(),n.Xb(48,\"div\",25),n.Ic(49),n.Wb(),n.Wb(),n.Xb(50,\"div\"),n.Xb(51,\"div\",26),n.Ic(52),n.Wb(),n.Xb(53,\"div\",27),n.Ic(54),n.Wb(),n.Wb(),n.Xb(55,\"div\"),n.Xb(56,\"div\",28),n.Ic(57),n.Wb(),n.Xb(58,\"div\",27),n.Ic(59),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Wb()),2&t&&(n.Fb(16),n.nc(\"ngModel\",e.stakingPair.toStakeAmount)(\"disabled\",!e.isStakeAvailable),n.Fb(1),n.nc(\"ngIf\",!e.isTostakeAmountValid),n.Fb(6),n.nc(\"ngModel\",e.stakingPair.toUnstakeAmount)(\"disabled\",!e.isUnstakeAvailable),n.Fb(1),n.nc(\"ngIf\",!e.istoUnstakeAmountValid),n.Fb(3),n.Kc(\"Reward Amount (\",e.dataService.projectDetails.tokenName,\")\"),n.Fb(2),n.Jc(e.stakingPair.reward_amount?e.stakingPair.reward_amount:n.jc(30,18,0,e.dataService.fixNumber)),n.Fb(4),n.Kc(\"When you withdraw. the contract will automatically claim \",e.dataService.projectDetails.tokenName,\" on your behalf! \"),n.Fb(2),n.nc(\"disabled\",!e.isStakeAvailable||!e.isTostakeAmountValid),n.Fb(2),n.nc(\"disabled\",!e.isUnstakeAvailable||!e.istoUnstakeAmountValid),n.Fb(2),n.nc(\"disabled\",!e.isClaimAvailable),n.Fb(10),n.Kc(\" \",e.stakingPair.avilableStakeAmount,\" \"),n.Fb(3),n.Lc(\" \",e.stakingPair.fromCurrency,\" - \",e.stakingPair.toCurrency,\" \"),n.Fb(2),n.Kc(\" \",e.dataService.projectDetails.tokenName,\" Balance(Since Last Claim) \"),n.Fb(3),n.Kc(\" \",e.dataService.metaDeatails.governanceTokenBalance,\" \"),n.Fb(2),n.Kc(\"\",e.dataService.projectDetails.tokenName,\" \"))},directives:[l.n,l.b,l.i,l.l,u.m],pipes:[u.f],styles:[\".stackingboxinner[_ngcontent-%COMP%]{padding:15px;height:calc(100% - 40px)}.stackboxTit[_ngcontent-%COMP%]{color:#7a766a;font-size:22px;font-weight:700;margin-top:0;margin-bottom:0}.rightsideVal[_ngcontent-%COMP%]{margin-top:5px}input[_ngcontent-%COMP%]::-webkit-inner-spin-button, input[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.err-msg[_ngcontent-%COMP%]{font-size:10px;color:red}\"]}),t})()}}]);","extractedComments":[]}