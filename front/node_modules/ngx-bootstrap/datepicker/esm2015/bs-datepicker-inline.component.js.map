{"version":3,"file":"bs-datepicker-inline.component.js","sources":["../../../../src/datepicker/bs-datepicker-inline.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  ComponentRef,\n  Directive,\n  ElementRef,\n  EventEmitter,\n  Input,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  Output,\n  Renderer2,\n  SimpleChanges,\n  ViewContainerRef\n} from '@angular/core';\n\nimport { ComponentLoader, ComponentLoaderFactory } from 'ngx-bootstrap/component-loader';\n\nimport { Subscription } from 'rxjs';\nimport { BsDatepickerInlineConfig } from './bs-datepicker-inline.config';\n\nimport { BsDatepickerConfig } from './bs-datepicker.config';\nimport { DatepickerDateCustomClasses, DatepickerDateTooltipText } from './models';\nimport { BsDatepickerInlineContainerComponent } from './themes/bs/bs-datepicker-inline-container.component';\nimport { checkBsValue } from './utils/bs-calendar-utils';\n\n@Directive({\n  selector: 'bs-datepicker-inline',\n  exportAs: 'bsDatepickerInline'\n})\nexport class BsDatepickerInlineDirective implements OnInit, OnDestroy, OnChanges {\n  /**\n   * Config object for datepicker\n   */\n  @Input() bsConfig?: Partial<BsDatepickerInlineConfig>;\n  /**\n   * Indicates whether datepicker is enabled or not\n   */\n  @Input() isDisabled = false;\n  /**\n   * Minimum date which is available for selection\n   */\n  @Input() minDate?: Date;\n  /**\n   * Maximum date which is available for selection\n   */\n  @Input() maxDate?: Date;\n  /**\n   * Date custom classes\n   */\n  @Input() dateCustomClasses?: DatepickerDateCustomClasses[];\n  /**\n   * Date tooltip text\n   */\n  @Input() dateTooltipTexts?: DatepickerDateTooltipText[];\n  /**\n   * Disable specific dates\n   */\n  @Input() datesEnabled?: Date[];\n  /**\n   * Enable specific dates\n   */\n  @Input() datesDisabled?: Date[];\n  /**\n   * Emits when datepicker value has been changed\n   */\n  @Output() bsValueChange: EventEmitter<Date> = new EventEmitter();\n  protected _subs: Subscription[] = [];\n  private readonly _datepicker: ComponentLoader<BsDatepickerInlineContainerComponent>;\n  private _datepickerRef?: ComponentRef<BsDatepickerInlineContainerComponent>;\n\n  constructor(\n    public _config: BsDatepickerInlineConfig,\n    private _elementRef: ElementRef,\n    _renderer: Renderer2,\n    _viewContainerRef: ViewContainerRef,\n    cis: ComponentLoaderFactory\n  ) {\n    // todo: assign only subset of fields\n    Object.assign(this, this._config);\n    this._datepicker = cis.createLoader<BsDatepickerInlineContainerComponent>(\n      _elementRef,\n      _viewContainerRef,\n      _renderer\n    );\n  }\n\n  _bsValue?: Date;\n\n  /**\n   * Initial value of datepicker\n   */\n  @Input()\n  set bsValue(value: Date) {\n    if (this._bsValue === value) {\n      return;\n    }\n\n    if (!this._bsValue && value) {\n      const now = new Date();\n\n      value.setMilliseconds(now.getMilliseconds());\n      value.setSeconds(now.getSeconds());\n      value.setMinutes(now.getMinutes());\n      value.setHours(now.getHours());\n    }\n\n    this._bsValue = value;\n    this.bsValueChange.emit(value);\n  }\n\n  ngOnInit(): void {\n    this.setConfig();\n\n    // if date changes from external source (model -> view)\n    this._subs.push(\n      this.bsValueChange.subscribe((value: Date) => {\n        if (this._datepickerRef) {\n          this._datepickerRef.instance.value = value;\n        }\n      })\n    );\n\n    // if date changes from picker (view -> model)\n    if (this._datepickerRef) {\n      this._subs.push(\n        this._datepickerRef.instance.valueChange.subscribe((value: Date) => {\n          this.bsValue = value;\n        })\n      );\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (!this._datepickerRef || !this._datepickerRef.instance) {\n      return;\n    }\n\n    if (changes.minDate) {\n      this._datepickerRef.instance.minDate = this.minDate;\n      this.setConfig();\n    }\n\n    if (changes.maxDate) {\n      this._datepickerRef.instance.maxDate = this.maxDate;\n      this.setConfig();\n    }\n\n    if (changes.datesDisabled) {\n      this._datepickerRef.instance.datesDisabled = this.datesDisabled;\n      this.setConfig();\n    }\n\n    if (changes.datesEnabled) {\n      this._datepickerRef.instance.datesEnabled = this.datesEnabled;\n      this._datepickerRef.instance.value = this._bsValue;\n    }\n\n    if (changes.isDisabled) {\n      this._datepickerRef.instance.isDisabled = this.isDisabled;\n      this.setConfig();\n    }\n\n    if (changes.dateCustomClasses) {\n      this._datepickerRef.instance.dateCustomClasses = this.dateCustomClasses;\n      this.setConfig();\n    }\n\n    if (changes.dateTooltipTexts) {\n      this._datepickerRef.instance.dateTooltipTexts = this.dateTooltipTexts;\n      this.setConfig();\n    }\n  }\n\n  /**\n   * Set config for datepicker\n   */\n  setConfig(): void {\n    if (this._datepicker) {\n      this._datepicker.hide();\n    }\n\n    this._config = Object.assign({}, this._config, this.bsConfig, {\n      value: checkBsValue(this._bsValue, this.maxDate || this.bsConfig && this.bsConfig.maxDate),\n      isDisabled: this.isDisabled,\n      minDate: this.minDate || this.bsConfig && this.bsConfig.minDate,\n      maxDate: this.maxDate || this.bsConfig && this.bsConfig.maxDate,\n      dateCustomClasses: this.dateCustomClasses || this.bsConfig && this.bsConfig.dateCustomClasses,\n      dateTooltipTexts: this.dateTooltipTexts || this.bsConfig && this.bsConfig.dateTooltipTexts,\n      datesDisabled: this.datesDisabled || this.bsConfig && this.bsConfig.datesDisabled,\n      datesEnabled: this.datesEnabled || this.bsConfig && this.bsConfig.datesEnabled\n    });\n\n\n    this._datepickerRef = this._datepicker\n      .provide({ provide: BsDatepickerConfig, useValue: this._config })\n      .attach(BsDatepickerInlineContainerComponent)\n      .to(this._elementRef)\n      .show();\n  }\n\n  ngOnDestroy() {\n    this._datepicker.dispose();\n  }\n}\n"]}