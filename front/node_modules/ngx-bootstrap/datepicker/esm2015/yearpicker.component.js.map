{"version":3,"file":"yearpicker.component.js","sources":["../../../../src/datepicker/yearpicker.component.ts"],"names":[],"mappings":"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","sourcesContent":["// @deprecated\nimport { Component, OnInit } from '@angular/core';\n\nimport { isBs3 } from 'ngx-bootstrap/utils';\nimport { DatePickerInnerComponent } from './datepicker-inner.component';\n\n@Component({\n  selector: 'yearpicker',\n  template: `\n    <table *ngIf=\"datePicker.datepickerMode==='year'\" role='grid'>\n      <thead>\n      <tr>\n        <th>\n          <button type='button' class='btn btn-default btn-sm pull-left float-left'\n                  (click)='datePicker.move(-1)' tabindex='-1'>‹\n          </button>\n        </th>\n        <th [attr.colspan]='((datePicker.yearColLimit - 2) <= 0) ? 1 : datePicker.yearColLimit - 2'>\n          <button [id]=\"datePicker.uniqueId + '-title'\" role='heading'\n                  type='button' class='btn btn-default btn-sm'\n                  (click)='datePicker.toggleMode(0)'\n                  [disabled]='datePicker.datepickerMode === datePicker.maxMode'\n                  [ngClass]='{disabled: datePicker.datepickerMode === datePicker.maxMode}' tabindex='-1'\n                  style='width:100%;'>\n            <strong>{{ title }}</strong>\n          </button>\n        </th>\n        <th>\n          <button type='button' class='btn btn-default btn-sm pull-right float-right'\n                  (click)='datePicker.move(1)' tabindex='-1'>›\n          </button>\n        </th>\n      </tr>\n      </thead>\n      <tbody>\n      <tr *ngFor='let rowz of rows'>\n        <td *ngFor='let dtz of rowz' class='text-center' role='gridcell' [attr.id]='dtz.uid'>\n          <button type='button' style='min-width:100%;' class='btn btn-default'\n                  [ngClass]=\"{'btn-link': isBs4 && !dtz.selected && !datePicker.isActive(dtz), 'btn-info': dtz.selected || (isBs4 && !dtz.selected && datePicker.isActive(dtz)), disabled: dtz.disabled, active: !isBs4 && datePicker.isActive(dtz)}\"\n                  [disabled]='dtz.disabled'\n                  (click)='datePicker.select(dtz.date)' tabindex='-1'>\n            <span\n              [ngClass]=\"{'text-success': isBs4 && dtz.current, 'text-info': !isBs4 && dtz.current}\">{{ dtz.label }}</span>\n          </button>\n        </td>\n      </tr>\n      </tbody>\n    </table>\n  `,\n  styles: [\n    `\n      :host .btn-info .text-success {\n        color: #fff !important;\n      }\n    `\n  ]\n})\nexport class YearPickerComponent implements OnInit {\n  datePicker: DatePickerInnerComponent;\n  title?: string;\n  rows = [];\n\n  constructor(datePicker: DatePickerInnerComponent) {\n    this.datePicker = datePicker;\n  }\n\n  get isBs4(): boolean {\n    return !isBs3();\n  }\n\n  ngOnInit(): void {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    const self = this;\n\n    this.datePicker.stepYear = { years: this.datePicker.yearRange };\n\n    this.datePicker.setRefreshViewHandler(function(): void {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      // eslint-disable-next-line @typescript-eslint/no-this-alias\n      const that = this;\n      const years = new Array(that.yearRange);\n      let date: Date;\n      const start = self.getStartingYear(that.activeDate.getFullYear()) || 0;\n\n      for (let i = 0; i < that.yearRange; i++) {\n        date = new Date(start + i, 0, 1);\n        date = that.fixTimeZone(date);\n        years[i] = that.createDateObject(date, that.formatYear);\n        years[i].uid = that.uniqueId + '-' + i;\n      }\n\n      self.title = [years[0].label, years[that.yearRange - 1].label].join(\n        ' - '\n      );\n      self.rows = that.split(years, self.datePicker.yearColLimit);\n    }, 'year');\n\n    this.datePicker.setCompareHandler(function(\n      date1: Date,\n      date2: Date\n    ): number {\n      return date1.getFullYear() - date2.getFullYear();\n    }, 'year');\n\n    this.datePicker.refreshView();\n  }\n\n  protected getStartingYear(year: number): number | undefined {\n    // todo: parseInt\n    if (this.datePicker && this.datePicker.yearRange) {\n      return (\n        (year - 1) / this.datePicker.yearRange * this.datePicker.yearRange + 1\n      );\n    }\n    return undefined;\n  }\n}\n"]}