{"version":3,"file":"bs-modal.service.js","sources":["../../../../src/modal/bs-modal.service.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  ComponentRef,\n  Injectable,\n  TemplateRef,\n  EventEmitter,\n  Renderer2,\n  RendererFactory2,\n  Inject,\n  Optional\n} from '@angular/core';\n\nimport { ComponentLoader, ComponentLoaderFactory } from 'ngx-bootstrap/component-loader';\nimport { ModalBackdropComponent } from './modal-backdrop.component';\nimport { ModalContainerComponent } from './modal-container.component';\nimport {\n  CLASS_NAME,\n  modalConfigDefaults,\n  ModalOptions,\n  TRANSITION_DURATIONS,\n  MODAL_CONFIG_DEFAULT_OVERRIDE\n} from './modal-options.class';\nimport { BsModalRef } from './bs-modal-ref.service';\n\n@Injectable()\nexport class BsModalService {\n  // constructor props\n  config: ModalOptions;\n\n  onShow = new EventEmitter();\n  onShown = new EventEmitter();\n  onHide = new EventEmitter();\n  onHidden = new EventEmitter();\n\n  protected isBodyOverflowing = false;\n  protected originalBodyPadding = 0;\n\n  protected scrollbarWidth = 0;\n\n  protected backdropRef?: ComponentRef<ModalBackdropComponent>;\n  private _backdropLoader: ComponentLoader<ModalBackdropComponent>;\n  private modalsCount = 0;\n  private lastDismissReason?: string;\n\n  private loaders: ComponentLoader<ModalContainerComponent>[] = [];\n\n  private _renderer: Renderer2;\n\n  constructor(\n    rendererFactory: RendererFactory2,\n    private clf: ComponentLoaderFactory,\n    @Optional() @Inject(MODAL_CONFIG_DEFAULT_OVERRIDE) private modalDefaultOption: ModalOptions) {\n    this._backdropLoader = this.clf.createLoader<ModalBackdropComponent>();\n    this._renderer = rendererFactory.createRenderer(null, null);\n    this.config = modalDefaultOption ?\n      (Object.assign({}, modalConfigDefaults, modalDefaultOption)) :\n      modalConfigDefaults;\n  }\n\n  /** Shows a modal */\n  show<T>(\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    content: string | TemplateRef<any> | { new(...args: any[]): T },\n    config?: ModalOptions<T>\n  ): BsModalRef<T> {\n    this.modalsCount++;\n    this._createLoaders();\n\n    // must be different per every show() call\n    const id = config?.id || (new Date()).getUTCMilliseconds();\n    this.config = this.modalDefaultOption ?\n      Object.assign({}, modalConfigDefaults, this.modalDefaultOption, config) :\n      Object.assign({}, modalConfigDefaults, config);\n    this.config.id = id;\n\n    this._showBackdrop();\n    this.lastDismissReason = void 0;\n\n    return this._showModal<T>(content);\n  }\n\n  hide(id?: number | string) {\n    if (this.modalsCount === 1 || id == null) {\n      this._hideBackdrop();\n      this.resetScrollbar();\n    }\n    this.modalsCount = this.modalsCount >= 1 && id != null ? this.modalsCount - 1 : 0;\n    setTimeout(() => {\n      this._hideModal(id);\n      this.removeLoaders(id);\n    }, this.config.animated ? TRANSITION_DURATIONS.BACKDROP : 0);\n  }\n\n  _showBackdrop(): void {\n    const isBackdropEnabled =\n      this.config.backdrop === true || this.config.backdrop === 'static';\n    const isBackdropInDOM =\n      !this.backdropRef || !this.backdropRef.instance.isShown;\n\n    if (this.modalsCount === 1) {\n      this.removeBackdrop();\n\n      if (isBackdropEnabled && isBackdropInDOM) {\n        this._backdropLoader\n          .attach(ModalBackdropComponent)\n          .to('body')\n          .show({ isAnimated: this.config.animated });\n        this.backdropRef = this._backdropLoader._componentRef;\n      }\n    }\n  }\n\n  _hideBackdrop(): void {\n    if (!this.backdropRef) {\n      return;\n    }\n    this.backdropRef.instance.isShown = false;\n    const duration = this.config.animated ? TRANSITION_DURATIONS.BACKDROP : 0;\n    setTimeout(() => this.removeBackdrop(), duration);\n  }\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  _showModal<T>(content: any): BsModalRef<T> {\n    const modalLoader = this.loaders[this.loaders.length - 1];\n    if (this.config && this.config.providers) {\n      for (const provider of this.config.providers) {\n        modalLoader.provide(provider);\n      }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const bsModalRef = new BsModalRef<any>();\n    const modalContainerRef = modalLoader\n      .provide({ provide: ModalOptions, useValue: this.config })\n      .provide({ provide: BsModalRef, useValue: bsModalRef })\n      .attach(ModalContainerComponent)\n      .to('body');\n    bsModalRef.hide = () => modalContainerRef.instance?.hide();\n    bsModalRef.setClass = (newClass: string) => {\n      if (modalContainerRef.instance) {\n        modalContainerRef.instance.config.class = newClass;\n      }\n    };\n\n    bsModalRef.onHidden = new EventEmitter<unknown>();\n    bsModalRef.onHide = new EventEmitter<unknown>();\n\n    this.copyEvent(modalLoader.onBeforeHide, bsModalRef.onHide);\n    this.copyEvent(modalLoader.onHidden, bsModalRef.onHidden);\n    // call 'show' method after assign setClass in bsModalRef.\n    // it makes modal component's bsModalRef available to call setClass method\n    modalContainerRef.show({\n      content,\n      isAnimated: this.config.animated,\n      initialState: this.config.initialState,\n      bsModalService: this,\n      id: this.config.id\n    });\n\n    if (modalContainerRef.instance) {\n      modalContainerRef.instance.level = this.getModalsCount();\n      bsModalRef.content = modalLoader.getInnerComponent();\n      bsModalRef.id = modalContainerRef.instance.config?.id;\n    }\n\n    return bsModalRef;\n  }\n\n  _hideModal(id?: number | string): void {\n    if (id != null) {\n      const indexToRemove = this.loaders.findIndex(loader => loader.instance?.config.id === id);\n      const modalLoader = this.loaders[indexToRemove];\n      if (modalLoader) {\n        modalLoader.hide(id);\n      }\n    } else {\n      this.loaders.forEach(\n        (loader: ComponentLoader<ModalContainerComponent>) => {\n          if (loader.instance) {\n            loader.hide(loader.instance.config.id);\n          }\n        }\n      );\n    }\n  }\n\n  getModalsCount(): number {\n    return this.modalsCount;\n  }\n\n  setDismissReason(reason: string) {\n    this.lastDismissReason = reason;\n  }\n\n  removeBackdrop(): void {\n    this._renderer.removeClass(document.body, CLASS_NAME.OPEN);\n    this._renderer.setStyle(document.body, 'overflow-y', '');\n    this._backdropLoader.hide();\n    this.backdropRef = void 0;\n  }\n\n  /** Checks if the body is overflowing and sets scrollbar width */\n  /** @internal */\n  checkScrollbar(): void {\n    this.isBodyOverflowing = document.body.clientWidth < window.innerWidth;\n    this.scrollbarWidth = this.getScrollbarWidth();\n  }\n\n  setScrollbar(): void {\n    if (!document) {\n      return;\n    }\n\n    this.originalBodyPadding = parseInt(\n      window\n        .getComputedStyle(document.body)\n        .getPropertyValue('padding-right') || '0',\n      10\n    );\n\n    if (this.isBodyOverflowing) {\n      document.body.style.paddingRight = `${this.originalBodyPadding +\n        this.scrollbarWidth}px`;\n    }\n  }\n\n  private resetScrollbar(): void {\n    document.body.style.paddingRight = `${this.originalBodyPadding}px`;\n  }\n\n  // thx d.walsh\n  private getScrollbarWidth(): number {\n    const scrollDiv = this._renderer.createElement('div');\n    this._renderer.addClass(scrollDiv, CLASS_NAME.SCROLLBAR_MEASURER);\n    this._renderer.appendChild(document.body, scrollDiv);\n    const scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n    this._renderer.removeChild(document.body, scrollDiv);\n\n    return scrollbarWidth;\n  }\n\n  private _createLoaders(): void {\n    const loader = this.clf.createLoader<ModalContainerComponent>();\n    this.copyEvent(loader.onBeforeShow, this.onShow);\n    this.copyEvent(loader.onShown, this.onShown);\n    this.copyEvent(loader.onBeforeHide, this.onHide);\n    this.copyEvent(loader.onHidden, this.onHidden);\n    this.loaders.push(loader);\n  }\n\n  private removeLoaders(id?: number | string): void {\n    if (id != null) {\n      const indexToRemove = this.loaders.findIndex(loader => loader.instance?.config.id === id);\n      if (indexToRemove >= 0) {\n        this.loaders.splice(indexToRemove, 1);\n        this.loaders.forEach(\n          (loader: ComponentLoader<ModalContainerComponent>, i: number) => {\n            if (loader.instance) {\n              loader.instance.level = i + 1;\n            }\n          }\n        );\n      }\n    } else {\n      this.loaders.splice(0, this.loaders.length);\n    }\n  }\n\n  private copyEvent(from: EventEmitter<unknown>, to: EventEmitter<unknown>) {\n    from.subscribe((data) => {\n      to.emit(this.lastDismissReason || data);\n    });\n  }\n}\n"]}