{"version":3,"file":"tabset.component.js","sources":["../../../../src/tabs/tabset.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, HostBinding, Input, OnDestroy, Renderer2, ElementRef } from '@angular/core';\n\nimport { TabDirective } from './tab.directive';\nimport { TabsetConfig } from './tabset.config';\n// todo: add active event to tab\n// todo: fix? mixing static and dynamic tabs position tabs in order of creation\n@Component({\n  selector: 'tabset',\n  templateUrl: './tabset.component.html',\n  styleUrls: ['./tabs.scss']\n})\nexport class TabsetComponent implements OnDestroy {\n  /** if true tabs will be placed vertically */\n  @Input()\n  get vertical(): boolean {\n    return this._vertical;\n  }\n  set vertical(value: boolean) {\n    this._vertical = value;\n    this.setClassMap();\n  }\n\n  /** if true tabs fill the container and have a consistent width */\n  @Input()\n  get justified(): boolean {\n    return this._justified;\n  }\n  set justified(value: boolean) {\n    this._justified = value;\n    this.setClassMap();\n  }\n\n  /** navigation context class: 'tabs' or 'pills' */\n  @Input()\n  get type(): string {\n    return this._type;\n  }\n  set type(value: string) {\n    this._type = value;\n    this.setClassMap();\n  }\n\n  get isKeysAllowed(): boolean {\n    return this._isKeysAllowed;\n  }\n\n  set isKeysAllowed(value: boolean) {\n    this._isKeysAllowed = value;\n  }\n\n  @HostBinding('class.tab-container') clazz = true;\n\n  tabs: TabDirective[] = [];\n  classMap: { [key: string]: boolean } = {};\n\n  /** aria label for tab list */\n  ariaLabel = 'Tabs';\n\n  protected isDestroyed = false;\n  protected _vertical = false;\n  protected _justified = false;\n  protected _type = 'tabs';\n  protected _isKeysAllowed = true;\n\n  constructor(\n    config: TabsetConfig,\n    private renderer: Renderer2,\n    private elementRef: ElementRef\n  ) {\n    Object.assign(this, config);\n  }\n\n  ngOnDestroy(): void {\n    this.isDestroyed = true;\n  }\n\n  addTab(tab: TabDirective): void {\n    this.tabs.push(tab);\n    tab.active = this.tabs.length === 1 && !tab.active;\n  }\n\n  removeTab(\n    tab: TabDirective,\n    options = { reselect: true, emit: true }\n  ): void {\n    const index = this.tabs.indexOf(tab);\n    if (index === -1 || this.isDestroyed) {\n      return;\n    }\n    // Select a new tab if the tab to be removed is selected and not destroyed\n    if (options.reselect && tab.active && this.hasAvailableTabs(index)) {\n      const newActiveIndex = this.getClosestTabIndex(index);\n      this.tabs[newActiveIndex].active = true;\n    }\n    if (options.emit) {\n      tab.removed.emit(tab);\n    }\n    this.tabs.splice(index, 1);\n    if (tab.elementRef.nativeElement.parentNode) {\n      this.renderer.removeChild(\n        tab.elementRef.nativeElement.parentNode,\n        tab.elementRef.nativeElement\n      );\n    }\n  }\n\n    keyNavActions(event: KeyboardEvent, index: number) {\n    if (!this.isKeysAllowed) {\n      return;\n    }\n    const list: HTMLElement[] = Array.from(this.elementRef.nativeElement.querySelectorAll('.nav-link'));\n    // const activeElList = list.filter((el: HTMLElement) => !el.classList.contains('disabled'));\n    if (event.keyCode === 13 || event.key === 'Enter' || event.keyCode === 32 || event.key === 'Space') {\n      event.preventDefault();\n      const currentTab = list[(index) % list.length];\n      currentTab.click();\n\n      return;\n    }\n\n    if (event.keyCode === 39 || event.key === 'RightArrow') {\n      let nextTab: HTMLElement;\n      let shift = 1;\n\n      do {\n        nextTab = list[(index + shift) % list.length];\n\n        shift++;\n      } while (nextTab.classList.contains('disabled'));\n\n      nextTab.focus();\n\n      return;\n    }\n\n    if (event.keyCode === 37 || event.key === 'LeftArrow') {\n      let previousTab: HTMLElement;\n      let shift = 1;\n      let i = index;\n\n      do {\n        if ((i - shift) < 0) {\n          i = list.length - 1;\n          previousTab = list[i];\n          shift = 0;\n        } else {\n          previousTab = list[i - shift];\n        }\n\n        shift++;\n      } while (previousTab.classList.contains('disabled'));\n\n      previousTab.focus();\n\n      return;\n    }\n\n    if (event.keyCode === 36 || event.key === 'Home') {\n      event.preventDefault();\n\n      let firstTab: HTMLElement;\n      let shift = 0;\n\n      do {\n        firstTab = list[shift % list.length];\n\n        shift++;\n      } while (firstTab.classList.contains('disabled'));\n\n      firstTab.focus();\n\n      return;\n    }\n\n    if (event.keyCode === 35 || event.key === 'End') {\n      event.preventDefault();\n\n      let lastTab: HTMLElement;\n      let shift = 1;\n      let i = index;\n\n      do {\n        if ((i - shift) < 0) {\n          i = list.length - 1;\n          lastTab = list[i];\n          shift = 0;\n        } else {\n          lastTab = list[i - shift];\n        }\n\n        shift++;\n      } while (lastTab.classList.contains('disabled'));\n\n      lastTab.focus();\n\n      return;\n    }\n\n    if (event.keyCode === 46 || event.key === 'Delete') {\n      if (this.tabs[index].removable) {\n        this.removeTab(this.tabs[index]);\n\n        if (list[index + 1]) {\n          list[(index + 1) % list.length].focus();\n\n          return;\n        }\n\n        if (list[list.length - 1]) {\n          list[0].focus();\n        }\n      }\n    }\n  }\n\n  protected getClosestTabIndex(index: number): number {\n    const tabsLength = this.tabs.length;\n    if (!tabsLength) {\n      return -1;\n    }\n\n    for (let step = 1; step <= tabsLength; step += 1) {\n      const prevIndex = index - step;\n      const nextIndex = index + step;\n      if (this.tabs[prevIndex] && !this.tabs[prevIndex].disabled) {\n        return prevIndex;\n      }\n      if (this.tabs[nextIndex] && !this.tabs[nextIndex].disabled) {\n        return nextIndex;\n      }\n    }\n\n    return -1;\n  }\n\n  protected hasAvailableTabs(index: number): boolean {\n    const tabsLength = this.tabs.length;\n    if (!tabsLength) {\n      return false;\n    }\n\n    for (let i = 0; i < tabsLength; i += 1) {\n      if (!this.tabs[i].disabled && i !== index) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  protected setClassMap(): void {\n    this.classMap = {\n      'nav-stacked': this.vertical,\n      'flex-column': this.vertical,\n      'nav-justified': this.justified,\n      [`nav-${this.type}`]: true\n    };\n  }\n}\n"]}